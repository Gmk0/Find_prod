import{q as L,am as J,g as l,s as m,c as u,b as e,f as n,t as i,H as I,P as K,v as Z,a0 as Q,h as v,w as N,u as U,i as M,x as E,o as c,e as X,aR as Y,n as F,p as W,a as ee,O as se}from"./app-6357163f.js";import{_ as te}from"./WebLayout-c511e2ae.js";import{V as oe}from"./MazRadioButtons-71e91c92.js";import"./userInfo-84fdefcf.js";import"./index-2630c011.js";const r=p=>(W("data-v-e0f04bdc"),p=p(),ee(),p),ae={class:"min-h-screen py-5 pt-16 custom overflow-y-auto-scrollbar bg-gray-50 min-w-screen dark:bg-gray-900"},le={class:"px-6 md:px-12"},re=r(()=>e("div",null,[e("div",{class:"mb-2"}),e("div",{class:"mb-2"},[e("h1",{class:"text-5xl font-bold text-gray-600 md:text-2xl dark:text-gray-200"},"Panier Personnaliser")])],-1)),de={key:0,class:"w-full px-5 py-10 mx-0 text-gray-800 bg-white border-t border-b border-gray-200 rounded-md dark:bg-gray-800"},ne={class:"w-full"},ie={class:"items-start -mx-3 md:flex"},ce={class:"px-3 md:w-7/12 lg:pr-10"},ue={class:"flex flex-col divide-y divide-gray-700"},pe={class:"flex flex-col py-6 sm:flex-row sm:justify-between"},me={class:"flex w-full space-x-2 sm:space-x-4"},ve=["src"],_e={class:"flex flex-col justify-between w-full pb-4"},fe={class:"flex justify-between w-full pb-2 space-x-2"},ge={class:"space-y-1"},be={class:"text-lg font-semibold leading-snug dark:text-gray-100 sm:pr-8"},xe=r(()=>e("p",{class:"text-sm dark:text-gray-100"},null,-1)),he={class:"text-right dark:text-gray-100"},ye={class:"text-lg font-semibold"},we=r(()=>e("p",{class:"text-sm line-through"}," $",-1)),ke={class:"pb-6 mb-6 border-b border-gray-200"},Ve={class:"flex items-end justify-end"},Se={class:"flex-grow px-2 lg:max-w-md"},ze={class:"p-2"},Pe=r(()=>e("div",{class:"p-2"},[e("button",{class:"block w-full max-w-xs px-5 py-2 mx-auto font-semibold text-white bg-gray-400 border border-transparent rounded-md hover:bg-gray-500 focus:bg-gray-500"},"APPLIQUER")],-1)),je={class:"pb-6 mb-6 text-gray-800 border-b border-gray-200"},Ce={class:"flex items-center w-full mb-3"},Ie=r(()=>e("div",{class:"flex-grow"},[e("span",{class:"text-gray-600 dark:text-gray-200"},"Sous total")],-1)),Ne={class:"pl-3"},Ue={class:"font-semibold dark:text-gray-50"},Me=E('<div class="flex items-center w-full" data-v-e0f04bdc><div class="flex-grow" data-v-e0f04bdc><span class="text-gray-600 dark:text-gray-200" data-v-e0f04bdc>Taxes(GST)</span></div><div class="pl-3" data-v-e0f04bdc><span class="font-semibold dark:text-gray-50" data-v-e0f04bdc>$0</span></div></div>',1),Ee={class:"pb-6 mb-6 text-xl text-gray-800 border-b border-gray-200 md:border-none"},Be={class:"flex items-center w-full"},Te=r(()=>e("div",{class:"flex-grow"},[e("span",{class:"text-gray-600 dark:text-gray-200"},"Total")],-1)),$e={class:"pl-3"},Oe=r(()=>e("span",{class:"text-sm font-semibold text-gray-400 dark:text-gray-20"},null,-1)),Ae={class:"font-semibold"},Re={class:"hidden w-full p-4 mb-4 font-semibold bg-white border border-gray-200 rounded-md dark:bg-gray-900"},qe={class:"flex flex-col gap-4"},De={class:"w-full mx-auto mb-6 text-gray-800 bg-white border border-gray-200 rounded-lg top-8 dark:bg-gray-900"},Ge={class:"hidden w-full p-6 border-b border-gray-200"},He={class:"mb-5"},Le={for:"type1",class:"flex items-center cursor-pointer"},Je=r(()=>e("img",{src:"https://www.jordanfinancialservices.com/2021/sites/default/files/images/logos/orange_money-01.jpg",class:"h-6 ml-3"},null,-1)),Ke={key:0,class:"px-2"},Ze=r(()=>e("div",{class:"relative grid grid-cols-3 gap-2 mb-3"},null,-1)),Qe=r(()=>e("div",{class:"mt-4"},[e("button",{class:"block w-full select-none rounded-lg bg-amber-600 py-2 px-2 text-center align-middle font-sans text-sm font-bold uppercase text-white shadow-md shadow-pink-500/20 transition-all hover:shadow-lg hover:shadow-amber-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none","data-ripple-light":"true"},[e("span",null,"PAYER ($)")])],-1)),Xe=[Ze,Qe],Ye={class:"w-full p-2 border-b border-gray-200 lg:p-6"},Fe={class:"flex flex-wrap gap-4 mb-5"},We={style:{display:"flex"}},es={style:{display:"flex","flex-direction":"column"}},ss={class:"dark:text-gray-200"},ts={key:0},os={class:"grid grid-cols-1 gap-4 mb-4 lg:px-4"},as={class:"flex flex-col gap-4 px-3 mb-3"},ls={key:1,class:"flex flex-col items-center justify-center gap-4 py-8"},rs=r(()=>e("h1",{class:"text-2xl"},"Votre panier est vide",-1)),ds=[rs],ns={key:0},is=E('<div data-v-e0f04bdc><div class="fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen" style="background:rgba(0, 0, 0, 0.3);" data-v-e0f04bdc><div class="flex flex-col items-center px-5 py-2 bg-white border rounded-lg" data-v-e0f04bdc><div class="relative block w-20 h-5 mt-2 loader-dots" data-v-e0f04bdc><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full" data-v-e0f04bdc></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full" data-v-e0f04bdc></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full" data-v-e0f04bdc></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full" data-v-e0f04bdc></div></div><div class="mt-2 text-xs font-medium text-center text-gray-500" data-v-e0f04bdc> Paiement en cours... </div></div></div></div>',1),cs=[is],us={key:1,style:{background:"rgba(0, 0, 0, 0.3)"},class:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen"},ps={class:"flex flex-col items-center justify-center px-12 py-8 mx-4 bg-gray-100 rounded-lg"},ms={class:"w-32 h-32 px-12 py-12 mb-4 text-center text-gray-800 bg-gray-200 rounded-full"},vs={class:"text-4xl font-bold"},_s=r(()=>e("p",{class:"text-lg"},null,-1)),fs=r(()=>e("p",{class:"mb-4 text-xl text-gray-700"},"Veuillez confirmer votre paiement",-1)),gs=r(()=>e("p",{class:"max-w-md text-base text-gray-600 font-bega-light"},"Une fenêtre pop-up va s'ouvrir pour vous permettre de confirmer votre paiement. Veuillez suivre les instructions à l'écran pour compléter la transaction. Ne fermez pas ni ne rafraîchissez cette page pendant le processus de paiement.",-1)),bs=Object.assign({layout:te},{__name:"CheckoutCustom",props:{userSetting:Object,proposal:Object},setup(p){var w,k,V,S,z,P,j,C;J();const d=p,a=l({name:"",numero:"",adresse:(k=(w=d.userSetting)==null?void 0:w.addresse_facturation)==null?void 0:k.adresse,commune:(S=(V=d.userSetting)==null?void 0:V.addresse_facturation)==null?void 0:S.commune,ville:(P=(z=d.userSetting)==null?void 0:z.addresse_facturation)==null?void 0:P.ville,pays:(C=(j=d.userSetting)==null?void 0:j.addresse_facturation)==null?void 0:C.pays}),B=l(!1);l(!1),l(!1),l(!1);const T=l(["CD"]),b=l(!1);l(!1),l(!1);const _=l(!1),x=l(60);let h=null;const f=l(""),y=l(""),$=async()=>{try{_.value=!0;const t=await axios.post(route("checkoutMaxiCustom"),{form:a.value,service_id:d.proposal.service.id,proposal_id:d.proposal.id,total:d.proposal.proposed_price});_.value=!1,f.value=t.data.order_id,y.value=t.data.transaction_id,console.log(t.data),t.data?t.data.result.code==0&&(console.log(t.data.result),h=setInterval(()=>{x.value--,x.value<=0&&(clearInterval(h),O())},1e3)):swal.fire({title:error.message,icon:"error",text:"une erreur s'est produite veuillez ressayer",timerProgressBar:!0})}catch(t){_.value=!1,t.response&&swal.fire({title:t.message,icon:"error",text:t.response.data,timerProgressBar:!0}),swal.fire({title:t.message,icon:"error",text:t.message,timerProgressBar:!0})}},O=async()=>{se.post(route("checkoutStatus"),{order_id:f.value,transaction_id:y.value},{onError:t=>{swal.fire({title:t.message,icon:"error",text:t.message,timerProgressBar:!0})}}),f.value=null};l("");const A=[{value:"10",label:"Orange Money",areaName:"orange",areaEnsignUrl:"https://www.jordanfinancialservices.com/2021/sites/default/files/images/logos/orange_money-01.jpg"},{value:"9",label:"Vodacom Mpesa",areaName:"Vodacom",areaEnsignUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSmtTAhz7LJHKfRf5ZGowNS3ZKJH_X_26iPUv3wzBkcug&s"},{value:"17",label:"airtel Money",areaName:"airtel",areaEnsignUrl:"https://zoom-eco.net/wp-content/uploads/2021/02/15.png"}];return(t,o)=>{const R=m("Error"),q=m("TextInput"),g=m("MazInput"),D=m("MazPhoneNumberInput"),G=m("ButtonMt");return c(),u("div",null,[e("div",ae,[e("div",le,[re,e("div",null,[n(R)]),d.proposal!=null?(c(),u("div",de,[e("div",ne,[e("div",ie,[e("div",ce,[e("ul",ue,[e("li",pe,[e("div",me,[e("img",{class:"flex-shrink-0 object-cover w-20 h-20 rounded outline-none dark:border-transparent sm:w-32 sm:h-32 dark:bg-gray-500",src:"/storage/"+d.proposal.service.files[0],alt:"service"},null,8,ve),e("div",_e,[e("div",fe,[e("div",ge,[e("h3",be,i(d.proposal.service.title),1),xe]),e("div",he,[e("p",ye,"$"+i(d.proposal.proposed_price),1),we])])])])])]),e("div",ke,[I(e("div",Ve,[e("div",Se,[e("div",ze,[n(q)])]),Pe],512),[[K,B.value]])]),e("div",je,[e("div",Ce,[Ie,e("div",Ne,[e("span",Ue,i(d.proposal.proposed_price)+" $",1)])]),Me]),e("div",Ee,[e("div",Be,[Te,e("div",$e,[Oe,e("span",Ae,i(d.proposal.proposed_price)+" $",1)])])])]),e("form",{onSubmit:Z($,["prevent"]),class:"flex flex-col px-2 md:w-5/12"},[e("div",null,[e("div",Re,[e("div",qe,[n(g,{label:"Addresse",type:"Addresse",modelValue:a.value.adresse,"onUpdate:modelValue":o[0]||(o[0]=s=>a.value.adresse=s)},null,8,["modelValue"]),n(g,{label:"commune",type:"commune",modelValue:a.value.commune,"onUpdate:modelValue":o[1]||(o[1]=s=>a.value.commune=s)},null,8,["modelValue"]),n(g,{label:"ville",type:"ville",modelValue:a.value.ville,"onUpdate:modelValue":o[2]||(o[2]=s=>a.value.ville=s)},null,8,["modelValue"]),n(g,{label:"Pays",type:"Pays",modelValue:a.value.pays,"onUpdate:modelValue":o[3]||(o[3]=s=>a.value.pays=s)},null,8,["modelValue"])])]),e("div",De,[e("div",Ge,[e("div",He,[e("label",Le,[I(e("input",{type:"checkbox",class:"w-5 h-5 text-indigo-500 form-radio",id:"type1","onUpdate:modelValue":o[4]||(o[4]=s=>b.value=s),onClick:o[5]||(o[5]=s=>t.isProviderToogle("orange"))},null,512),[[Q,b.value]]),Je])]),b.value?(c(),u("div",Ke,Xe)):v("",!0)]),e("div",Ye,[e("div",Fe,[n(U(oe),{modelValue:a.value.provider,"onUpdate:modelValue":o[6]||(o[6]=s=>a.value.provider=s),options:A,color:"primary"},{default:N(({option:s,selected:H})=>[e("div",We,[s.areaEnsignUrl?(c(),X(U(Y),{key:0,src:s.areaEnsignUrl,style:{"margin-right":"16px"},size:"0.8rem"},null,8,["src"])):v("",!0),e("div",es,[e("span",ss,i(s.label),1),e("span",{class:F({"maz-text-muted":!H})},i(s.areaName),3)])])]),_:1},8,["modelValue"])]),a.value.provider!==""?(c(),u("div",ts,[e("div",null,[e("div",os,[n(D,{label:"Telephone","only-countries":T.value,success:!1,required:"",modelValue:a.value.numero,"onUpdate:modelValue":o[7]||(o[7]=s=>a.value.numero=s),translations:{countrySelector:{placeholder:"Code pays",error:"Choisissez un pays",searchPlaceholder:"Rechercher un pays"},phoneInput:{placeholder:"Numéro de téléphone",example:"Exemple :"}}},null,8,["only-countries","modelValue"])]),e("div",as,[n(G,{type:"submit"},{default:N(()=>[M(" payer ")]),_:1})]),M(" "+i(a.value.provider),1)])])):v("",!0)])])])],32)])])])):(c(),u("div",ls,ds))]),_.value?(c(),u("div",ns,cs)):v("",!0),f.value?(c(),u("div",us,[e("div",ps,[e("div",ms,[e("p",vs,i(x.value),1),_s]),fs,gs])])):v("",!0)])])}}}),Vs=L(bs,[["__scopeId","data-v-e0f04bdc"]]);export{Vs as default};
