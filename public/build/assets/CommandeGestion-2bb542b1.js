import{X as U,g as h,E as V,T as k,s as b,c as s,b as e,f as o,w as _,u as g,t as d,i as r,n as j,h as w,o as a,A as C,Y as O,F as S,l as R,H as G,U as H}from"./app-b5f698ff.js";import{_ as X}from"./UserLayout-e55dfabe.js";import"./MainSidebarUser-4ab73780.js";/* empty css                                                          */import"./userInfo-123f10a4.js";import"./index-2630c011.js";const Y={class:"flex flex-col min-h-screen gap-6 px-4 lg:mx-auto md:p-6 lg:max-w-7xl md:container px-auto bg-inherit"},I={class:"flex flex-col"},J={class:"flex","aria-label":"Breadcrumb"},K={class:"inline-flex items-center space-x-1 md:space-x-3"},Q={class:"inline-flex items-center"},W={"aria-current":"page"},Z=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),ee=e("span",{class:"ml-1 text-sm font-bega-medium text-gray-700 md:ml-2 dark:text-gray-400"},"Commande",-1),te={"aria-current":"page"},se={class:"flex items-center"},ae=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),oe={class:"ml-1 text-sm font-bega-medium text-gray-500 md:ml-2 dark:text-gray-400"},ne=e("h1",{class:"mt-4 text-3xl font-bega-semibold text-black dark:text-white"},"Commandes",-1),re={class:""},le={class:"overflow-hidden bg-white rounded-lg shadow-md dark:bg-gray-800"},de={class:"grid grid-cols-1 px-6 py-4 lg:grid-cols-2"},ie={class:"mb-4 font-bega-bold text-lg text-gray-800 dark:text-gray-300"},ce={class:"font-bega-semibold"},ue={class:"mb-4 text-lg text-gray-800 font-bega-semibold md:mb-2 dark:text-gray-300"},me={class:"font-bega-semibold"},_e={class:"mb-4 text-base text-gray-600 font-bega-medium dark:text-gray-300 md:mb-2"},ge={class:"mb-4 text-base text-gray-600 font-bega-medium md:mb-2 dark:text-gray-300"},pe={class:"text-green-500"},be={class:"mb-4 text-base text-gray-600 md:mb-2 font-bega-medium dark:text-gray-300"},xe={key:0,class:"text-red-300 px-1.5 py-0.5 rounded-lg"},ve={key:1,class:"text-green-500 px-1.5 py-0.5 rounded-lg"},he={key:2,class:"bg-red-500 px-1.5 py-0.5 rounded-lg"},fe={class:"mb-4 text-base text-gray-600 md:mb-2 font-bega-medium dark:text-gray-300"},ye={key:0,class:"text-green-500 px-1.5 py-0.5 rounded-lg"},ke={key:1,class:"text-red-300 px-1.5 py-0.5 rounded-lg"},we={key:0,class:"mb-4 text-base text-gray-600 md:mb-2 font-bega-medium dark:text-gray-300"},Ce={key:0,class:"text-blue-300 px-1.5 py-0.5 rounded-lg"},Ee={key:1,class:"text-green-500 px-1.5 py-0.5 rounded-lg"},Pe={key:2,class:"text-red-200 px-1.5 py-0.5 rounded-lg"},Be={key:3,class:"bg-red-500 px-1.5 py-0.5 rounded-lg"},Fe={key:1,class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},Me=e("span",null,"Pas d'etat disponible",-1),je={class:"px-6 py-4 border-t font-bega-medium border-gray-200"},De=e("p",{class:"mb-2 text-lg text-gray-800"},"Avancement",-1),Le={class:"flex items-center"},Te={class:"flex-1"},$e={class:"ml-2 text-sm text-gray-600 dark:text-gray-300"},qe={class:"px-6 py-4 border-t border-gray-300"},ze=e("h1",{class:"flex items-start font-bega-medium gap-2 text-lg cursor-pointer lg:text-xl"}," Freelance lié ",-1),Ae={class:"flex items-center mt-4"},Ne={class:"ml-4"},Ue={href:"",class:"text-base font-bega-medium text-gray-600 dark:text-gray-300"},Ve={class:"px-6 py-4 border-t border-gray-200"},Oe=e("path",{d:"M14.707 7.293a1 1 0 0 0-1.414 0L10 10.586 6.707 7.293a1 1 0 0 0-1.414 1.414l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 0-1.414z"},null,-1),Se=[Oe],Re={key:0},Ge={class:"mb-3 border-b border-gray-50"},He={class:"text-base text-gray-600 dark:text-gray-300"},Xe={class:"mt-4 text-sm text-gray-500"};const Ye={class:"px-6 py-4 border-t border-gray-200"},Ie=e("p",{class:"mb-2 text-lg text-gray-800"},"Options supplémentaires",-1),Je={class:"grid grid-cols-2 gap-2 lg:grid-cols-5 md:grid-cols-4 lg:flex-row"},Ke={key:0},Qe=e("button",{type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-bega-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"},"Contacter",-1),We=[Qe],Ze={class:"w-full"},et={key:1,class:"w-full"},tt={key:2,class:"w-full"},st=e("div",{class:"hidden"},[e("button",{type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-bega-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"},"Payer")],-1),at={class:"hidden"},ot={class:"px-6 py-4 border-t border-gray-200"},nt={class:"flex items-start gap-2 text-xl font-bega-semibold cursor-pointer"},rt=e("path",{d:"M14.707 7.293a1 1 0 0 0-1.414 0L10 10.586 6.707 7.293a1 1 0 0 0-1.414 1.414l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 0-1.414z"},null,-1),lt=[rt],dt={key:0,class:"pt-4"},it={class:"text-base text-gray-600 font-bega-medium dark:text-gray-300"},ct={class:"text-lg font-bega-medium"},ut={class:"text-base text-gray-600 font-bega-medium dark:text-gray-300"},mt={class:"flex gap-4"},_t={class:""},gt={class:"text-base text-gray-600 font-bega-medium dark:text-gray-300"},pt={class:"p-2 text-xl font-bega-semibold text-green-400 rounded"},bt={class:"p-2"},xt=e("span",null,[e("i",{class:"pi pi-eye"})],-1),vt={key:1},ht=e("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"Numéro de transaction : Pas de transaction en cours",-1),ft=[ht],yt={class:"flex flex-col w-full mt-8"},kt={class:"flex gap-4 mt-4"},wt={class:"flex flex-col w-full mt-4"},Ct=e("div",null,[e("div",null,[e("div",{class:"flex items-center justify-center mb-2 text-lg text-gray-800 dark:text-gray-100"},"Confirmez la réception de votre commande"),e("div",{class:"px-4 mt-4 text-lg text-gray-700 dark:text-gray-50"}," En confirmant la réception, vous attestez que la commande a été réalisée à votre satisfaction. Cela permettra au freelance de recevoir son paiement. Êtes-vous prêt à procéder? ")])],-1),Et={class:"flex items-center justify-center gap-4 mt-4"},Lt=Object.assign({layout:X},{__name:"CommandeGestion",props:{commande:Object},setup(D){const f=U(),i=D,x=h(!1),t=V(()=>i.commande.data),v=h(!1),p=h(!1),y=k({description:i.commande.data.feedback.commentaires,rating:i.commande.data.feedback.satisfactions,feedback_id:i.commande.data.feedback.id}),L=k({order_id:i.commande.data.id}),T=k({freelance_user_id:i.commande.data.freelance_user.id,freelance_id:i.commande.data.freelance.id,message:"",order:i.commande.data.id}),$=()=>{T.post(route("user.paiements.contacterUser"))},c=h(!1),q=()=>{y.post(route("user.commandes.sendFeeback"),{preserveScroll:!0,onFinish:()=>{c.value=!1},onError:u=>{f.add({severity:"danger",summary:"Message",detail:u.message,group:"br",life:3e3})}})},z=()=>{L.post(route("user.paiements.debloquerPaiement"),{onSuccess:()=>{p.value=!1,f.add({severity:"info",summary:"Message",detail:"Paiement debloquer avec success",group:"br",life:3e3})},onError:u=>{f.add({severity:"danger",summary:"Message",detail:u.message,group:"br",life:3e3})}})};return(u,n)=>{var B,F,M;const A=b("Toast"),N=b("Photo"),E=b("Collapse"),m=b("Button"),P=b("Dialog");return a(),s("div",Y,[e("div",I,[e("div",null,[e("nav",J,[e("ol",K,[e("li",Q,[o(g(C),{href:u.route("user.dashboard"),Fclass:"inline-flex items-center text-sm font-bega-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},{default:_(()=>[r(" Dashboard ")]),_:1},8,["href"])]),e("li",W,[o(g(C),{href:u.route("user.commandes"),class:"flex items-center"},{default:_(()=>[Z,ee]),_:1},8,["href"])]),e("li",te,[e("div",se,[ae,e("span",oe,d(t.value.order_numero),1)])])])])]),ne]),o(A,{position:"bottom-right",group:"br"}),e("div",re,[e("div",le,[e("div",de,[e("p",ie,[r("Commande : "),e("span",ce,d(t.value.order_numero),1)]),e("p",ue,[r("Service : "),e("span",me,d(t.value.service.title),1)]),e("p",_e,[r("Date de commande : "),e("span",null,d(t.value.created_at),1)]),e("p",ge,[r("Date de livraison : "),e("span",pe,d((B=t.value.feedback)==null?void 0:B.delai_livraison_estimee),1)]),e("p",be,[r("Paiement : "),t.value.status==="pending"?(a(),s("span",xe,"en Attente")):t.value.status==="completed"?(a(),s("span",ve,"Payé")):(a(),s("span",he,"Rejeter"))]),e("p",fe,[r("Paiement au Freelance : "),t.value.is_paid!=null?(a(),s("span",ye,"Payé")):(a(),s("span",ke,"en Attente"))]),t.value.feedback!=null?(a(),s("p",we,[r("Etat : "),t.value.feedback.etat==="En attente de traitement"?(a(),s("span",Ce,"En attente de traitement")):t.value.feedback.etat==="Livré"?(a(),s("span",Ee,"Livré")):t.value.feedback.etat==="En cours de préparation"?(a(),s("span",Pe,"En cours de préparation")):(a(),s("span",Be,"En transit"))])):(a(),s("p",Fe,[r(" Etat de la commande : "),Me]))]),e("div",je,[De,e("div",Le,[e("div",Te,[o(g(O),{value:t.value.progress,class:"dark:!bg-gray-700"},null,8,["value"])]),e("p",$e,d(t.value.progress)+"%",1)])]),e("div",qe,[ze,e("div",Ae,[o(N,{user:t.value.freelance_user,taille:"20"},null,8,["user"]),e("div",Ne,[e("a",Ue,d(t.value.freelance.nom_complet),1)])])]),e("div",Ve,[e("h1",{onClick:n[0]||(n[0]=l=>v.value=!v.value),class:"flex items-start gap-2 text-lg font-bega-semibold cursor-pointer lg:text-xl"},[r(" Rapport Envoyer "),e("button",null,[(a(),s("svg",{class:j([{"rotate-180":v.value},"w-6 h-6 fill-current"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Se,2))])]),o(E,{when:v.value,class:""},{default:_(()=>[(a(),s("div",Re,[(a(!0),s(S,null,R(t.value.rapports,l=>(a(),s("div",Ge,[e("p",He,d(l.description),1),e("span",Xe,d(l.created_at),1)]))),256))]))]),_:1},8,["when"])]),e("div",Ye,[Ie,e("div",Je,[t.value.transaction==null?(a(),s("div",Ke,We)):w("",!0),e("div",Ze,[e("div",null,[o(m,{outlined:"",severity:"info",onClick:$,label:"Contacter"})])]),((F=t.value.feedback)==null?void 0:F.etat)=="Livré"?(a(),s("div",et,[e("div",null,[o(m,{onClick:n[1]||(n[1]=l=>c.value=!c.value),outlined:"",severity:"info",label:"Feedback"})])])):w("",!0),((M=t.value.feedback)==null?void 0:M.etat)=="Livré"&&t.value.is_paid==null?(a(),s("div",tt,[e("div",null,[o(m,{onClick:n[2]||(n[2]=l=>p.value=!p.value),outlined:"",severity:"success",label:"Debloquer Paiment"})])])):w("",!0),st,e("div",at,[o(m,{size:"small",raised:"",severity:"danger",label:"Annuler"})])])]),e("div",null,[e("div",ot,[e("h1",nt,[r(" Transaction de paiement liée "),e("button",{onClick:n[3]||(n[3]=l=>x.value=!x.value)},[(a(),s("svg",{class:j([{"rotate-180":x.value},"w-6 h-6 fill-current"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},lt,2))])]),o(E,{when:x.value},{default:_(()=>[t.value.transaction!=null?(a(),s("div",dt,[e("p",it,[r("Numéro de transaction : "),e("span",ct,"#"+d(t.value.transaction.transaction_numero),1)]),e("p",ut,[r("Méthode de paiement : "),e("span",null,"••• "+d(t.value.transaction.payment_method.last4),1)]),e("div",mt,[e("div",_t,[e("p",gt,[r("Montant payé : "),e("span",pt,d(t.value.transaction.amount)+" $ ",1)])])]),e("div",bt,[o(g(C),{href:u.route("user.transactions.one",[t.value.transaction.transaction_numero])},{default:_(()=>[xt]),_:1},8,["href"])])])):(a(),s("div",vt,ft))]),_:1},8,["when"])])])])]),o(P,{visible:c.value,"onUpdate:visible":n[6]||(n[6]=l=>c.value=l),position:"'bottom'",modal:"",header:"Feedback",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:_(()=>[e("div",yt,[e("div",null,[G(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=l=>g(y).description=l),id:"message",placeholder:"Message",rows:"4",class:"block w-full rounded-lg border border-gray-300 border-spacing-x-0.5 bg-gray-50 p-2.5 text-sm text-gray-900 focus: focus:ring-amber-500 dark:border-gray-800 dark:bg-gray-900 dark:text-white dark:placeholder-gray-400 dark:focus:border-amber-500 dark:focus:ring-amber-500"},`

                                            `,512),[[H,g(y).description]])]),e("div",kt,[o(m,{onClick:q,label:"Envoyer",outlined:""}),o(m,{severity:"danger",outlined:"",onClick:n[5]||(n[5]=l=>c.value=!c.value),label:"Annuler"})])])]),_:1},8,["visible"]),o(P,{visible:p.value,"onUpdate:visible":n[7]||(n[7]=l=>p.value=l),position:"'bottom'",modal:"",header:"Confirmer Comannde Finis",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:_(()=>[e("div",wt,[Ct,e("div",Et,[o(m,{onClick:z,outlined:"",severity:"success",label:"Oui, je confirme"})])])]),_:1},8,["visible"])])}}});export{Lt as default};
