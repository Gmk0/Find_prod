import{a0 as te,at as oe,g as n,E as T,s as f,c as r,b as e,f as i,F as ae,l as le,i as L,H as b,P,v as O,t as d,h as c,af as re,w as Z,u as M,x as S,o as l,e as ne,aq as de,n as ie,X as D,O as ce}from"./app-570bfa9b.js";import{_ as ue}from"./WebLayout-6a65ac9e.js";import{V as pe}from"./MazRadioButtons-ca00da20.js";import"./userInfo-fad88c82.js";import"./index-2630c011.js";const me={class:"min-h-screen py-5 pt-16 overflow-y-auto custom scrollbar bg-gray-50 min-w-screen dark:bg-findDark-950"},ve={class:"px-2 md:px-12"},ge=e("div",null,[e("div",{class:"mb-2"}),e("div",{class:"mb-2"},[e("h1",{class:"text-5xl font-bold text-gray-600 md:text-2xl dark:text-gray-200"},"Panier")])],-1),_e={key:0,class:"w-full px-5 py-10 mx-0 text-gray-800 bg-white border-t border-b border-gray-200 rounded-md dark:bg-gray-800"},xe={class:"w-full"},he={class:"items-start -mx-3 md:flex"},fe={class:"px-3 md:w-7/12 lg:pr-10"},be={class:"flex flex-col divide-y divide-gray-700"},ye={class:"flex flex-col py-6 sm:flex-row sm:justify-between"},we={class:"flex w-full space-x-2 sm:space-x-4"},ke=["src"],Ve={class:"flex flex-col justify-between w-full pb-4"},ze={class:"flex justify-between w-full pb-2 space-x-2"},Ce={class:"space-y-1"},Pe={class:"text-lg leading-snug font-bega-semibold dark:text-gray-100 sm:pr-8"},Me={class:"text-sm dark:text-gray-100"},Se={class:"hidden text-right dark:text-gray-100"},Ue={class:"text-lg font-bega-semibold"},je={class:"flex text-sm divide-x dark:text-white"},Ne=["onClick"],Be=S('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-4 h-4 fill-current"><path d="M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z"></path><rect width="32" height="200" x="168" y="216"></rect><rect width="32" height="200" x="240" y="216"></rect><rect width="32" height="200" x="312" y="216"></rect><path d="M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z"></path></svg><span>Retirer</span>',2),Ee=[Be],$e={class:"px-4 dark:text-gray-100"},He={class:"text-lg font-bega-semibold"},Ie={class:"pb-6 mb-6 border-b border-gray-200"},qe={class:"flex gap-1 mb-2 ml-1 text-sm text-gray-600 font-bega-semibold dark:text-gray-200"},Ae={class:"py-1"},Re={class:"w-4 h-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Te=e("path",{d:"M5.293 6.293a1 1 0 011.414 0L10 9.586l2.293-2.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"},null,-1),Le=[Te],Oe={class:"py-1"},Ze={class:"w-4 h-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},De=e("path",{d:"M14.293 15.293a1 1 0 01-1.414 0L10 12.414l-2.293 2.293a1 1 0 01-1.414-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 010 1.414z"},null,-1),Ge=[De],Fe={class:"w-3/4"},Je={class:"p-2"},Ke={key:0,class:"text-red-600"},Xe=e("div",{class:"w-2/4 px-4"},[e("button",{type:"submit",class:"block w-full max-w-xs px-5 py-2 text-white bg-gray-400 border border-transparent rounded-md font-bega-semibold hover:bg-gray-500 focus:bg-gray-500"},"APPLIQUER")],-1),Qe={class:"pb-6 mb-6 text-gray-800 border-b border-gray-200"},Ye={class:"flex items-center w-full mb-3"},We=e("div",{class:"flex-grow"},[e("span",{class:"text-gray-600 dark:text-gray-200"},"Sous total")],-1),es={class:"pl-3"},ss={class:"font-bega-semibold dark:text-gray-50"},ts={key:0,class:"flex items-center w-full"},os=e("div",{class:"flex-grow"},[e("span",{class:"text-gray-600 dark:text-gray-200"},"Reduction")],-1),as={class:"pl-3"},ls={class:"font-bega-semibold dark:text-gray-50"},rs=S('<div class="flex items-center w-full"><div class="flex-grow"><span class="text-gray-600 dark:text-gray-200">Taxes(GST)</span></div><div class="pl-3"><span class="font-bega-semibold dark:text-gray-50">0 $</span></div></div>',1),ns={class:"pb-6 mb-6 text-xl text-gray-800 border-b border-gray-200 md:border-none"},ds={class:"flex items-center w-full"},is=e("div",{class:"flex-grow"},[e("span",{class:"text-gray-600 dark:text-gray-200"},"Total")],-1),cs={class:"pl-3"},us={class:"text-gray-400 font-bega-semibold dark:text-gray-200"},ps={class:"hidden w-full p-4 mb-4 bg-white border border-gray-200 rounded-md font-bega-semibold dark:bg-gray-900"},ms={class:"flex flex-col gap-4"},vs={class:"w-full mx-auto mb-6 text-gray-800 bg-white border border-gray-200 rounded-lg top-8 dark:bg-gray-900"},gs={class:"hidden w-full p-6 border-b border-gray-200"},_s={class:"mb-5"},xs={for:"type1",class:"flex items-center cursor-pointer"},hs=e("img",{src:"https://www.jordanfinancialservices.com/2021/sites/default/files/images/logos/orange_money-01.jpg",class:"h-6 ml-3"},null,-1),fs={key:0,class:"px-2"},bs=e("div",{class:"relative grid grid-cols-3 gap-2 mb-3"},null,-1),ys=e("div",{class:"mt-4"},[e("button",{class:"block w-full select-none rounded-lg bg-amber-600 py-2 px-2 text-center align-middle font-sans text-sm font-bold uppercase text-white shadow-md shadow-pink-500/20 transition-all hover:shadow-lg hover:shadow-amber-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none","data-ripple-light":"true"},[e("span",null,"PAYER ($)")])],-1),ws=[bs,ys],ks={class:"w-full p-2 border-b border-gray-200 lg:p-6"},Vs={class:"flex flex-wrap gap-4 mb-5"},zs={style:{display:"flex"}},Cs={style:{display:"flex","flex-direction":"column"}},Ps={class:"dark:text-gray-200"},Ms={key:0},Ss={class:"grid grid-cols-1 gap-4 mb-4 lg:px-4"},Us={class:"flex flex-col gap-4 px-3 mb-3"},js={key:1,class:"flex flex-col items-center justify-center gap-4 py-8"},Ns=e("h1",{class:"text-2xl"},"Votre panier est vide",-1),Bs=[Ns],Es={key:0},$s=S('<div><div class="fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen" style="background:rgba(0, 0, 0, 0.3);"><div class="flex flex-col items-center px-5 py-2 bg-white border rounded-lg"><div class="relative block w-20 h-5 mt-2 loader-dots"><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div></div><div class="mt-2 text-xs font-medium text-center text-gray-500"> Paiement en cours... </div></div></div></div>',1),Hs=[$s],Is={key:1,style:{background:"rgba(0, 0, 0, 0.3)"},class:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen"},qs={class:"flex flex-col items-center justify-center px-12 py-8 mx-4 bg-gray-100 rounded-lg"},As={class:"w-32 h-32 px-12 py-12 mb-4 text-center text-gray-800 bg-gray-200 rounded-full"},Rs={class:"text-4xl font-bold"},Ts=e("p",{class:"text-lg"},null,-1),Ls=e("p",{class:"mb-4 text-xl text-gray-700"},"Veuillez confirmer votre paiement",-1),Os=e("p",{class:"max-w-md text-base text-gray-600 font-bega-light"},"Une fenêtre pop-up va s'ouvrir pour vous permettre de confirmer votre paiement. Veuillez suivre les instructions à l'écran pour compléter la transaction. Ne fermez pas ni ne rafraîchissez cette page pendant le processus de paiement.",-1),Ks=Object.assign({layout:ue},{__name:"Checkout",props:{userSetting:Object},setup(G){var N,B,E,$,H,I,q,A;const m=te("$swal"),v=oe(),g=G,a=n({numero:"",provider:"",adresse:(B=(N=g.userSetting)==null?void 0:N.addresse_facturation)==null?void 0:B.adresse,commune:($=(E=g.userSetting)==null?void 0:E.addresse_facturation)==null?void 0:$.commune,ville:(I=(H=g.userSetting)==null?void 0:H.addresse_facturation)==null?void 0:I.ville,pays:(A=(q=g.userSetting)==null?void 0:q.addresse_facturation)==null?void 0:A.pays}),F=n(["CD"]),y=n(""),w=n(null),_=T(()=>v.items),k=n(null),u=n(!1),V=n(!1),z=T(()=>v.totalCost),J=async()=>{try{const t=await D.post(route("applyCoupon"),{coupon:y.value,items:_.value});K(t.data.id,t.data.prix),w.value=t.data.reduction}catch(t){k.value=t.response.data.error,console.error(t)}},K=(t,o)=>{v.updatePriceCoupons({itemId:t,price:o})},x=n(!1),C=n(60);let U=null;const h=n(""),j=n(""),X=async()=>{try{x.value=!0;const t=await D.post(route("checkoutMaxi"),{form:a.value,items:_.value,total:z.value});x.value=!1,h.value=t.data.order_id,j.value=t.data.transaction_id,console.log(t.data),t.data?t.data.result.code==0&&(console.log(t.data.result),U=setInterval(()=>{C.value--,C.value<=0&&(clearInterval(U),Q())},1e3)):m.fire({title:error.message,icon:"error",text:"une erreur s'est produite veuillez ressayer",timerProgressBar:!0})}catch(t){x.value=!1,t.response&&m.fire({title:t.message,icon:"error",text:t.response.data,timerProgressBar:!0}),m.fire({title:t.message,icon:"error",text:t.message,timerProgressBar:!0})}},Q=async()=>{ce.post(route("checkoutStatus"),{order_id:h.value,transaction_id:j.value},{onError:t=>{m.fire({title:t.message,icon:"error",text:t.message,timerProgressBar:!0})}}),h.value=null};n("");const Y=[{value:"10",label:"Orange Money",areaName:"orange",areaEnsignUrl:"https://www.jordanfinancialservices.com/2021/sites/default/files/images/logos/orange_money-01.jpg"},{value:"9",label:"Vodacom Mpesa",areaName:"Vodacom",areaEnsignUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSmtTAhz7LJHKfRf5ZGowNS3ZKJH_X_26iPUv3wzBkcug&s"},{value:"17",label:"airtel Money",areaName:"airtel",areaEnsignUrl:"https://zoom-eco.net/wp-content/uploads/2021/02/15.png"}];return(t,o)=>{const W=f("Error"),p=f("MazInput"),ee=f("MazPhoneNumberInput"),se=f("ButtonMt");return l(),r("div",null,[e("div",me,[e("div",ve,[ge,e("div",null,[i(W)]),_.value.length>0?(l(),r("div",_e,[e("div",xe,[e("div",he,[e("div",fe,[e("ul",be,[(l(!0),r(ae,null,le(_.value,s=>(l(),r("li",ye,[e("div",we,[e("img",{class:"flex-shrink-0 object-cover w-20 h-20 rounded outline-none dark:border-transparent sm:w-32 sm:h-32 dark:bg-gray-500",src:s.image,alt:"service"},null,8,ke),e("div",Ve,[e("div",ze,[e("div",Ce,[e("h3",Pe,d(s.name),1),e("p",Me,d(s.basic),1)]),e("div",Se,[e("p",Ue,d(s.price*s.quantity)+" $",1)])]),e("div",je,[e("button",{type:"button",onClick:R=>M(v).removeItem(s.id),class:"flex items-center px-2 py-1 pl-0 space-x-1"},Ee,8,Ne),e("div",null,[e("div",$e,[e("p",He,d(s.price*s.quantity)+" $",1)])])])])])]))),256))]),e("div",Ie,[e("button",{onClick:o[0]||(o[0]=s=>u.value=!u.value),class:""},[e("label",qe,[L("Coupon de reduction "),e("span",Ae,[b((l(),r("svg",Re,Le,512)),[[P,!u.value]])]),e("span",Oe,[b((l(),r("svg",Ze,Ge,512)),[[P,u.value]])])])]),b(e("form",{onSubmit:o[2]||(o[2]=O(s=>J(),["prevent"])),class:"flex flex-col w-full"},[e("div",Fe,[e("div",Je,[i(p,{modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=s=>y.value=s)},null,8,["modelValue"]),k.value?(l(),r("div",Ke,d(k.value),1)):c("",!0)])]),Xe],544),[[P,u.value]])]),e("div",Qe,[e("div",Ye,[We,e("div",es,[e("span",ss,d(z.value)+" $",1)])]),w.value?(l(),r("div",ts,[os,e("div",as,[e("span",ls,d(w.value),1)])])):c("",!0),rs]),e("div",ns,[e("div",ds,[is,e("div",cs,[e("span",us,d(z.value)+"$",1)])])])]),e("form",{onSubmit:O(X,["prevent"]),class:"flex flex-col px-2 md:w-5/12"},[e("div",null,[e("div",ps,[e("div",ms,[i(p,{label:"Addresse",type:"Addresse",modelValue:a.value.adresse,"onUpdate:modelValue":o[3]||(o[3]=s=>a.value.adresse=s)},null,8,["modelValue"]),i(p,{label:"commune",type:"commune",modelValue:a.value.commune,"onUpdate:modelValue":o[4]||(o[4]=s=>a.value.commune=s)},null,8,["modelValue"]),i(p,{label:"ville",type:"ville",modelValue:a.value.ville,"onUpdate:modelValue":o[5]||(o[5]=s=>a.value.ville=s)},null,8,["modelValue"]),i(p,{label:"Pays",type:"Pays",modelValue:a.value.pays,"onUpdate:modelValue":o[6]||(o[6]=s=>a.value.pays=s)},null,8,["modelValue"])])]),e("div",vs,[e("div",gs,[e("div",_s,[e("label",xs,[b(e("input",{type:"checkbox",class:"w-5 h-5 text-indigo-500 form-radio",id:"type1","onUpdate:modelValue":o[7]||(o[7]=s=>V.value=s),onClick:o[8]||(o[8]=s=>t.isProviderToogle("orange"))},null,512),[[re,V.value]]),hs])]),V.value?(l(),r("div",fs,ws)):c("",!0)]),e("div",ks,[e("div",Vs,[i(M(pe),{modelValue:a.value.provider,"onUpdate:modelValue":o[9]||(o[9]=s=>a.value.provider=s),options:Y,color:"primary"},{default:Z(({option:s,selected:R})=>[e("div",zs,[s.areaEnsignUrl?(l(),ne(M(de),{key:0,src:s.areaEnsignUrl,style:{"margin-right":"16px"},size:"0.8rem"},null,8,["src"])):c("",!0),e("div",Cs,[e("span",Ps,d(s.label),1),e("span",{class:ie({"maz-text-muted":!R})},d(s.areaName),3)])])]),_:1},8,["modelValue"])]),a.value.provider!==""?(l(),r("div",Ms,[e("div",null,[e("div",Ss,[i(ee,{label:"Telephone","only-countries":F.value,success:!1,required:"",modelValue:a.value.numero,"onUpdate:modelValue":o[10]||(o[10]=s=>a.value.numero=s),translations:{countrySelector:{placeholder:"Code pays",error:"Choisissez un pays",searchPlaceholder:"Rechercher un pays"},phoneInput:{placeholder:"Numéro de téléphone",example:"Exemple :"}}},null,8,["only-countries","modelValue"])]),e("div",Us,[i(se,{type:"submit"},{default:Z(()=>[L(" payer ")]),_:1})])])])):c("",!0)])])])],32)])])])):(l(),r("div",js,Bs))]),x.value?(l(),r("div",Es,Hs)):c("",!0),h.value?(l(),r("div",Is,[e("div",qs,[e("div",As,[e("p",Rs,d(C.value),1),Ts]),Ls,Os])])):c("",!0)])])}}});export{Ks as default};
