import{a1 as L,au as J,g as t,s as _,c as i,b as e,f as u,h as c,t as n,H as N,P as K,v as X,ag as Z,w as E,u as B,n as U,x as h,o as l,e as F,ar as Q,i as Y,X as W,O as ee}from"./app-3d392ef3.js";import{_ as se}from"./WebLayout-d419d9bd.js";import{V as te}from"./MazRadioButtons-c6dc7d58.js";import"./userInfo-0acfa0ec.js";import"./index-2630c011.js";const oe={class:"min-h-screen py-5 pt-16 custom overflow-y-auto-scrollbar bg-gray-50 min-w-screen dark:bg-gray-900"},ae={class:"px-6 md:px-12"},le=e("div",null,[e("div",{class:"mb-2"}),e("div",{class:"mb-2"},[e("h1",{class:"text-5xl font-bold text-gray-600 md:text-2xl dark:text-gray-200"},"Panier Personnaliser ")])],-1),re={key:0,class:"w-full px-5 py-10 mx-0 text-gray-800 bg-white border-t border-b border-gray-200 rounded-md dark:bg-gray-800"},ie={class:"w-full"},ne={class:"items-start -mx-3 md:flex"},de={class:"px-3 md:w-7/12 lg:pr-10"},ce={class:"flex flex-col divide-y divide-gray-700"},ue={class:"flex flex-col py-6 sm:flex-row sm:justify-between"},pe={class:"flex w-full space-x-2 sm:space-x-4"},me=["src"],ve={class:"flex flex-col justify-between w-full pb-4"},_e={class:"flex justify-between w-full pb-2 space-x-2"},ge={class:"space-y-1"},fe={class:"text-lg font-semibold leading-snug dark:text-gray-100 sm:pr-8"},xe=e("p",{class:"text-sm dark:text-gray-100"},null,-1),he={class:"text-right dark:text-gray-100"},be={class:"text-lg font-semibold"},ye={class:"pb-6 mb-6 border-b border-gray-200"},we={class:"flex items-end justify-end"},ke={class:"flex-grow px-2 lg:max-w-md"},Ve={class:"p-2"},je=e("div",{class:"p-2"},[e("button",{class:"block w-full max-w-xs px-5 py-2 mx-auto font-semibold text-white bg-gray-400 border border-transparent rounded-md hover:bg-gray-500 focus:bg-gray-500"},"APPLIQUER")],-1),ze={class:"pb-6 mb-6 text-gray-800 border-b border-gray-200"},Se={class:"flex items-center w-full mb-3"},Pe=e("div",{class:"flex-grow"},[e("span",{class:"text-gray-600 dark:text-gray-200"},"Sous total")],-1),Ce={class:"pl-3"},Ne={class:"font-semibold dark:text-gray-50"},Ee=h('<div class="flex items-center w-full"><div class="flex-grow"><span class="text-gray-600 dark:text-gray-200">Taxes(GST)</span></div><div class="pl-3"><span class="font-semibold dark:text-gray-50">$0</span></div></div>',1),Be={class:"pb-6 mb-6 text-xl text-gray-800 border-b border-gray-200 md:border-none"},Ue={class:"flex items-center w-full"},Me=e("div",{class:"flex-grow"},[e("span",{class:"text-gray-600 dark:text-gray-200"},"Total")],-1),Ie={class:"pl-3"},Te=e("span",{class:"text-sm font-semibold text-gray-400 dark:text-gray-20"},null,-1),$e={class:"font-semibold"},Oe={class:"w-full mx-auto mb-6 text-gray-800 bg-white border border-gray-200 rounded-lg top-8 dark:bg-gray-900"},qe={class:"hidden w-full p-6 border-b border-gray-200"},Re={class:"mb-5"},Ae={for:"type1",class:"flex items-center cursor-pointer"},De=e("img",{src:"https://www.jordanfinancialservices.com/2021/sites/default/files/images/logos/orange_money-01.jpg",class:"h-6 ml-3"},null,-1),Ge={key:0,class:"px-2"},He=e("div",{class:"relative grid grid-cols-3 gap-2 mb-3"},null,-1),Le=e("div",{class:"mt-4"},[e("button",{class:"block w-full select-none rounded-lg bg-amber-600 py-2 px-2 text-center align-middle font-sans text-sm font-bold uppercase text-white shadow-md shadow-pink-500/20 transition-all hover:shadow-lg hover:shadow-amber-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none","data-ripple-light":"true"},[e("span",null,"PAYER ($)")])],-1),Je=[He,Le],Ke={class:"w-full p-2 border-b border-gray-200 lg:p-6"},Xe={class:"flex flex-wrap gap-4 mb-5"},Ze={style:{display:"flex"}},Fe={style:{display:"flex","flex-direction":"column"}},Qe={class:"dark:text-gray-200"},Ye={class:"grid grid-cols-1 gap-4 mb-4 lg:px-4"},We={key:1,class:"flex flex-col items-center justify-center gap-4 py-8"},es=e("h1",{class:"text-2xl"},"Votre panier est vide",-1),ss=[es],ts={key:0},os=h('<div><div class="fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen" style="background:rgba(0, 0, 0, 0.3);"><div class="flex flex-col items-center px-5 py-2 bg-white border rounded-lg"><div class="relative block w-20 h-5 mt-2 loader-dots"><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div></div><div class="mt-2 text-xs font-medium text-center text-gray-500"> Paiement en cours... </div></div></div></div>',1),as=[os],ls={key:1},rs=h('<div><div class="fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen" style="background:rgba(0, 0, 0, 0.3);"><div class="flex flex-col items-center px-5 py-2 bg-white border rounded-lg"><div class="relative block w-20 h-5 mt-2 loader-dots"><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div></div><div class="mt-2 text-xs font-medium text-center text-gray-500"> Verification... </div></div></div></div>',1),is=[rs],ns={key:2,style:{background:"rgba(0, 0, 0, 0.3)"},class:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen"},ds={class:"flex flex-col items-center justify-center px-12 py-8 mx-4 bg-gray-100 rounded-lg"},cs={class:"w-32 h-32 px-12 py-12 mb-4 text-center text-gray-800 bg-gray-200 rounded-full"},us={class:"text-4xl font-bold"},ps=e("p",{class:"text-lg"},null,-1),ms=e("p",{class:"mb-4 text-xl text-gray-700"},"Veuillez confirmer votre paiement",-1),vs=e("p",{class:"max-w-md text-base text-gray-600 font-bega-light"},"Une fenêtre pop-up va s'ouvrir pour vous permettre de confirmer votre paiement. Veuillez suivre les instructions à l'écran pour compléter la transaction. Ne fermez pas ni ne rafraîchissez cette page pendant le processus de paiement. ",-1),bs=Object.assign({layout:se},{__name:"CheckoutCustom",props:{userSetting:Object,proposal:Object},setup(M){var w,k,V,j,z,S,P,C;const p=L("$swal");J();const o=M,d=t({name:"",numero:"",adresse:(k=(w=o.userSetting)==null?void 0:w.addresse_facturation)==null?void 0:k.adresse,commune:(j=(V=o.userSetting)==null?void 0:V.addresse_facturation)==null?void 0:j.commune,ville:(S=(z=o.userSetting)==null?void 0:z.addresse_facturation)==null?void 0:S.ville,pays:(C=(P=o.userSetting)==null?void 0:P.addresse_facturation)==null?void 0:C.pays}),I=t(!1);t(!1),t(!1),t(!1);const T=t(["CD"]),g=t(!1),f=t(!1);t(!1),t(!1);const m=t(!1),x=t(30);let b=null;const v=t(""),y=t(""),$=async()=>{try{m.value=!0;const s=await W.post(route("checkoutCustom"),{form:d.value,service_id:o.proposal.service.id,proposal_id:o.proposal.id,total:o.proposal.proposed_price});m.value=!1,v.value=s.data.order_id,y.value=s.data.transaction_id,console.log(s.data),s.data?s.data.result.code==0&&(console.log(s.data.result),b=setInterval(()=>{x.value--,x.value<=0&&(clearInterval(b),O())},1e3)):p.fire({title:error.message,icon:"error",text:"une erreur s'est produite veuillez ressayer",timerProgressBar:!0})}catch(s){m.value=!1,s.response&&p.fire({title:s.message,icon:"error",text:s.response.data,timerProgressBar:!0}),p.fire({title:s.message,icon:"error",text:s.message,timerProgressBar:!0})}},O=async()=>{g.value=!0,ee.post(route("checkoutStatusCustom"),{order_id:v.value,transaction_id:y.value},{onError:s=>{p.fire({title:s.message,icon:"error",text:s.message,timerProgressBar:!0})},onFinish:()=>{g.value=!1}}),v.value=null};t("");const q=[{value:"10",label:"Orange Money",areaName:"orange",areaEnsignUrl:"https://www.jordanfinancialservices.com/2021/sites/default/files/images/logos/orange_money-01.jpg"},{value:"9",label:"Vodacom Mpesa",areaName:"Vodacom",areaEnsignUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSmtTAhz7LJHKfRf5ZGowNS3ZKJH_X_26iPUv3wzBkcug&s"},{value:"17",label:"airtel Money",areaName:"airtel",areaEnsignUrl:"https://zoom-eco.net/wp-content/uploads/2021/02/15.png"}];return(s,r)=>{const R=_("Error"),A=_("TextInput"),D=_("MazPhoneNumberInput"),G=_("ButtonMt");return l(),i("div",null,[e("div",oe,[e("div",ae,[le,e("div",null,[u(R)]),o.proposal!=null?(l(),i("div",re,[e("div",ie,[e("div",ne,[e("div",de,[e("ul",ce,[e("li",ue,[e("div",pe,[o.proposal.service.files!=null?(l(),i("img",{key:0,class:"flex-shrink-0 object-cover w-20 h-20 rounded outline-none dark:border-transparent sm:w-32 sm:h-32 dark:bg-gray-500",src:"/storage/"+o.proposal.service.files[0],alt:"service"},null,8,me)):c("",!0),e("div",ve,[e("div",_e,[e("div",ge,[e("h3",fe,n(o.proposal.service.title),1),xe]),e("div",he,[e("p",be,"$"+n(o.proposal.proposed_price),1)])])])])])]),e("div",ye,[N(e("div",we,[e("div",ke,[e("div",Ve,[u(A)])]),je],512),[[K,I.value]])]),e("div",ze,[e("div",Se,[Pe,e("div",Ce,[e("span",Ne,n(o.proposal.proposed_price)+" $",1)])]),Ee]),e("div",Be,[e("div",Ue,[Me,e("div",Ie,[Te,e("span",$e,n(o.proposal.proposed_price)+" $",1)])])])]),e("form",{onSubmit:X($,["prevent"]),class:"flex flex-col px-2 md:w-5/12"},[e("div",null,[e("div",Oe,[e("div",qe,[e("div",Re,[e("label",Ae,[N(e("input",{type:"checkbox",class:"w-5 h-5 text-indigo-500 form-radio",id:"type1","onUpdate:modelValue":r[0]||(r[0]=a=>f.value=a),onClick:r[1]||(r[1]=a=>s.isProviderToogle("orange"))},null,512),[[Z,f.value]]),De])]),f.value?(l(),i("div",Ge,Je)):c("",!0)]),e("div",Ke,[e("div",Xe,[u(B(te),{modelValue:d.value.provider,"onUpdate:modelValue":r[2]||(r[2]=a=>d.value.provider=a),required:"",options:q,color:"primary"},{default:E(({option:a,selected:H})=>[e("div",Ze,[a.areaEnsignUrl?(l(),F(B(Q),{key:0,src:a.areaEnsignUrl,style:{"margin-right":"16px"},size:"0.8rem"},null,8,["src"])):c("",!0),e("div",Fe,[e("span",Qe,n(a.label),1),e("span",{class:U({"maz-text-muted":!H})},n(a.areaName),3)])])]),_:1},8,["modelValue"])]),e("div",null,[e("div",null,[e("div",Ye,[u(D,{label:"Telephone","only-countries":T.value,success:!1,required:"",modelValue:d.value.numero,"onUpdate:modelValue":r[3]||(r[3]=a=>d.value.numero=a),translations:{countrySelector:{placeholder:"Code pays",error:"Choisissez un pays",searchPlaceholder:"Rechercher un pays"},phoneInput:{placeholder:"Numéro de téléphone",example:"Exemple :"}}},null,8,["only-countries","modelValue"])]),e("div",{class:U([{hidden:d.value.provider==null},"flex flex-col gap-4 px-3 mb-3"])},[u(G,{type:"submit"},{default:E(()=>[Y(" payer ")]),_:1})],2)])])])])])],32)])])])):(l(),i("div",We,ss))]),m.value?(l(),i("div",ts,as)):c("",!0),g.value?(l(),i("div",ls,is)):c("",!0),v.value?(l(),i("div",ns,[e("div",ds,[e("div",cs,[e("p",us,n(x.value),1),ps]),ms,vs])])):c("",!0)])])}}});export{bs as default};
