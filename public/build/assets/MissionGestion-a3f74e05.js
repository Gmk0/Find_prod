import{_ as O}from"./UserLayout-ed275b7a.js";import{$ as F,E as L,g as _,T as h,s as u,c as s,f as o,b as e,i as r,t as n,h as m,n as y,F as S,l as V,w as v,u as k,o as a,A as w,O as P}from"./app-482dd3f4.js";import"./MainSidebarUser-d8a1b562.js";import"./PartialHeaderUser.vue_vue_type_style_index_0_lang-c3a8a21f.js";import"./userInfo-821d2599.js";import"./index-2630c011.js";const A={class:"flex flex-col min-h-screen gap-6 px-4 lg:mx-auto md:p-6 md:max-w-7xl md:container px-auto bg-inherit"},U={class:"px-2 px-4 py-6 dark:text-gray-400"},G={class:"max-w-6xl mx-auto"},T={class:"overflow-hidden bg-white rounded-lg shadow-md dark:bg-gray-800"},H={class:"grid grid-cols-1 px-6 py-4 font-bega-light lg:grid-cols-2"},I={class:"mb-4 text-lg text-gray-800 md:mb-2 dark:text-gray-300"},J={class:"mb-4 text-base text-gray-600 dark:text-gray-300 md:mb-2"},K={class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},Q={class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},W={class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},X={class:"text-lg font-bega-semibold text-amber-600"},Y={class:"hidden mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},Z={class:"font-bega-semibold"},ee={class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},te={key:0,class:"bg-green-100 text-green-800 text-xs font-bega-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300"},se={key:1,class:"bg-blue-100 text-blue-800 text-xs font-bega-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-blue-900 dark:text-blue-300"},ae={key:0,class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},oe=e("span",{class:"bg-green-100 text-green-800 text-xs font-bega-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300"},"Paiement veser",-1),ne={class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},ie={key:0,class:"text-red-300 px-1.5 py-0.5 rounded-lg"},re={key:1,class:"text-green-500 px-1.5 py-0.5 rounded-lg"},le={key:2,class:"text-blue-400 px-1.5 py-0.5 rounded-lg"},de={key:3,class:"bg-red-500 px-1.5 py-0.5 rounded-lg"},ce={class:"px-6 py-4 bprojet-t bprojet-gray-200"},ue=e("p",{class:"mb-2 text-lg text-gray-800"},"Avancement",-1),me={class:"flex items-center"},_e={class:"flex-1"},pe={class:"ml-2 text-sm text-gray-600 dark:text-gray-300"},xe={class:"px-6 py-4 bprojet-t bprojet-gray-300"},ge=e("h1",{class:"flex items-start gap-2 text-lg cursor-pointer font-bega-semibold lg:text-xl"}," Freelance lié ",-1),ve={class:"flex items-center mt-4"},be={class:"ml-4"},fe={class:"text-sm text-gray-600 dark:text-gray-300"},he={class:"hidden text-sm text-gray-600 dark:text-gray-300"},ye={class:"mx-4"},ke={key:0,class:"relative mb-3"},we={class:"mb-0"},Pe=e("span",null,"Rapport Envoyer",-1),Ce={"x-show":"open","x-collapse":"",class:"overflow-hidden transition-all duration-300 ease-in-out"},je={key:0,class:"p-4 text-sm leading-normal"},Be={class:"text-base text-gray-600 dark:text-gray-300"},Ee={class:"px-6 py-4 bprojet-t bprojet-gray-200"},$e=e("p",{class:"mb-2 text-lg text-gray-800"},"Options supplémentaires",-1),Re={class:"flex flex-col gap-2"},De={class:"flex gap-2 lg:flex-row"},Me={class:""},qe={key:0,class:"lg:w-full"},ze={class:"hidden lg:w-1/2"},Ne={key:1,class:"lg:w-1/2"},Oe=e("div",{class:"lg:w-full"},null,-1),Fe={class:"px-6 py-4 border-t border-gray-200"},Le={class:"flex items-start gap-2 text-xl cursor-pointer font-bega-semibold"},Se=e("path",{d:"M14.707 7.293a1 1 0 0 0-1.414 0L10 10.586 6.707 7.293a1 1 0 0 0-1.414 1.414l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 0-1.414z"},null,-1),Ve=[Se],Ae={key:0,class:"pt-4"},Ue={class:"text-base text-gray-600 dark:text-gray-300"},Ge={class:"text-lg font-bega-semibold"},Te={class:"text-base text-gray-600 dark:text-gray-300"},He={class:"flex gap-4"},Ie={class:""},Je={class:"text-base text-gray-600 dark:text-gray-300"},Ke={class:"p-2 text-xl text-green-400 rounded font-bega-semibolde"},Qe={class:"flex flex-col gap-4 p-2"},We={key:0},Xe={key:1},Ye=e("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"Numéro de transaction : Pas de transaction en cours",-1),Ze=[Ye],et={class:"flex flex-col w-full mt-4"},tt=e("div",null,[e("div",null,[e("div",{class:"flex items-center justify-center mb-2 text-lg text-gray-800 dark:text-gray-100"}," Confirmez la réception de votre commande"),e("div",{class:"px-4 mt-4 text-lg text-gray-700 dark:text-gray-50"}," En confirmant la réception, vous attestez que la commande a été réalisée à votre satisfaction. Cela permettra au freelance de recevoir son paiement. Êtes-vous prêt à procéder? ")])],-1),st={class:"flex items-center justify-center gap-4 mt-4"},dt=Object.assign({layout:O},{__name:"MissionGestion",props:{missionResponse:Object},setup(C){const f=F("$swal"),d=C,t=L(()=>d.missionResponse.data);_(!1),_(!1),h({responce_id:null});const p=_(!1),x=_(!1),b=_(!1),j=h({freelance_user_id:d.missionResponse.data.freelance_user.id,freelance_id:d.missionResponse.data.freelance.id,message:"",mission_id:d.missionResponse.data.mission_id}),B=()=>{j.post(route("user.missions.contacterUser"))},E=()=>{P.post(route("debloquerPaiementMission"),{mission_id:d.missionResponse.data.mission_id,mission_response_id:d.missionResponse.data.id}),p.value=!1},$=()=>{P.post(route("checkoutStatusMission"),{order_id:d.missionResponse.data.transaction.transaction_numero},{onSuccess:()=>{f.fire({title:"Etat du paiement",icon:"success",text:"Votre Paiement a éte effectuer avec succees",timerProgressBar:!0})},onError:g=>{f.fire({title:"une erreur s'est produite",icon:"error",text:"votre paimeent n'a pas aboutie",timerProgressBar:!0})}})};return(g,i)=>{const R=u("BreadUser"),D=u("ProgressBar"),M=u("Photo"),q=u("Span"),c=u("Button"),z=u("Collapse"),N=u("Dialog");return a(),s("div",A,[o(R,{title:"Mission Gestion",first_title:"Mission",first_url:g.route("user.missions"),second_title:"Gestion"},null,8,["first_url"]),e("div",null,[e("section",U,[e("div",G,[e("div",T,[e("div",H,[e("p",I,[r("Mission : "),e("span",null,n(t.value.mission.title),1)]),e("p",J,[r("Date de creation : "),e("span",null,n(t.value.mission.created_at),1)]),e("p",K,"Debut : Du "+n(t.value.mission.begin_mission),1),e("p",Q,"Fin : "+n(t.value.mission.end_mission),1),e("p",W,[r("Budjet : "),e("span",X,n(t.value.budget)+"$",1)]),e("p",Y,[r("Proposition : "),e("span",Z,n(t.value.budget)+"$",1)]),e("p",ee,[r("Paiement : "),t.value.mission.is_paid!=null?(a(),s("span",te,"Payer")):(a(),s("span",se,"en Attente"))]),t.value.is_paid!=null?(a(),s("p",ae,[r("Paiement Debloquer : "),oe])):m("",!0),e("p",ne,[r("Avancement : "),t.value.feedbackmission.etat==="En attente de traitement"?(a(),s("span",ie,"En attente de traitement")):t.value.feedbackmission.etat==="Livré"?(a(),s("span",re,"Livré")):t.value.feedbackmission.etat==="En cours de préparation"?(a(),s("span",le,"En cours de préparation")):(a(),s("span",de,"En transit"))])]),e("div",ce,[ue,e("div",me,[e("div",_e,[o(D,{value:t.value.mission.progress,class:"dark:!bg-gray-700"},null,8,["value"])]),e("p",pe,n(t.value.mission.progress)+"%",1)])]),e("div",xe,[ge,e("div",ve,[o(M,{user:t.value.freelance_user,taille:"20"},null,8,["user"]),e("div",be,[e("p",fe,n(t.value.freelance_user.name),1),e("p",he,n(t.value.freelance_user.email),1)])])]),e("div",ye,[t.value.rapports!=null?(a(),s("div",ke,[e("h6",we,[e("button",{onClick:i[0]||(i[0]=l=>b.value=!b.value),class:"relative flex items-center w-full p-4 text-base font-semibold text-left text-gray-600 transition-all ease-in border-b border-solid cursor-pointer border-slate-100 dark:text-gray-500 rounded-t-1 group text-dark-500","data-collapse-target":"animated-collapse-1"},[Pe,e("i",{class:y([b.value?"rotate-180 transition-transform":"","absolute right-0 pt-1 text-base transition-transform fa fa-chevron-down"])},null,2)])]),e("div",Ce,[t.value.rapports!=null?(a(),s("div",je,[(a(!0),s(S,null,V(t.value.rapports,l=>(a(),s("div",null,[e("div",Be,n(l.description),1),o(q,{class:"mt-4 text-sm text-gray-500"})]))),256))])):m("",!0)])])):m("",!0)]),e("div",Ee,[$e,e("div",Re,[e("div",De,[e("div",Me,[o(c,{outlined:"",onClick:i[1]||(i[1]=l=>B()),label:"Contacter"})]),t.value.mission.is_paid==null?(a(),s("div",qe,[o(k(w),{href:g.route("user.missions.missionPaiement",[t.value.mission.mission_numero,t.value.response_numero])},{default:v(()=>[o(c,{outlined:"",label:"Proceder au paiement"})]),_:1},8,["href"])])):m("",!0),e("div",ze,[o(c,{outlined:"",label:"Evaluer"})]),t.value.mission.is_paid!=null&&t.value.feedbackmission.etat==="Livré"&&t.value.is_paid==null?(a(),s("div",Ne,[o(c,{outlined:"",onClick:i[2]||(i[2]=l=>p.value=!0),severity:"success",label:"Debloquer Paiement"})])):m("",!0),Oe])])]),e("div",null,[e("div",Fe,[e("h1",Le,[r(" Transaction de paiement liée "),e("button",{onClick:i[3]||(i[3]=l=>x.value=!x.value)},[(a(),s("svg",{class:y([{"rotate-180":x.value},"w-6 h-6 fill-current"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Ve,2))])]),o(z,{when:x.value},{default:v(()=>[t.value.transaction!=null?(a(),s("div",Ae,[e("p",Ue,[r("Numéro de transaction : "),e("span",Ge,"#"+n(t.value.transaction.transaction_numero),1)]),e("p",Te,[r("Méthode de paiement : "),e("span",null,"••• "+n(t.value.transaction.payment_method.last4),1)]),e("div",He,[e("div",Ie,[e("p",Je,[r("Montant payé : "),e("span",Ke,n(t.value.transaction.amount)+" $ ",1)])])]),e("div",Qe,[o(k(w),{href:g.route("user.transactions.one",[t.value.transaction.transaction_numero])},{default:v(()=>[o(c,{size:"small",outlined:"",severity:"success",label:"voir la transaction"})]),_:1},8,["href"]),t.value.transaction.status==="pending"?(a(),s("div",We,[o(c,{size:"small",outlined:"",label:"verifier l'etat",onClick:i[4]||(i[4]=l=>$())})])):m("",!0)])])):(a(),s("div",Xe,Ze))]),_:1},8,["when"])])])])])])]),o(N,{visible:p.value,"onUpdate:visible":i[5]||(i[5]=l=>p.value=l),position:"'bottom'",modal:"",header:"Confirmer Comannde Finis",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[e("div",et,[tt,e("div",st,[o(c,{onClick:E,outlined:"",severity:"success",label:"Oui, je confirme"})])])]),_:1},8,["visible"])])}}});export{dt as default};
