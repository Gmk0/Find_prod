import{aQ as J,am as K,g as r,E as Q,s as f,c as n,b as e,f as i,F as X,l as Y,i as C,H as y,P as M,t as d,v as W,a0 as ee,h as m,w as A,u as _,x as P,o as l,e as te,aR as se,n as oe,O as ae}from"./app-3eb340d4.js";import{_ as le}from"./WebLayout-d58f837f.js";import{V as re}from"./MazRadioButtons-b4a09ae7.js";import"./userInfo-eae23b1a.js";import"./index-2630c011.js";const ne={class:"min-h-screen py-5 pt-16 overflow-y-auto custom scrollbar bg-gray-50 min-w-screen dark:bg-gray-900"},ie={class:"px-2 md:px-12"},de=e("div",null,[e("div",{class:"mb-2"}),e("div",{class:"mb-2"},[e("h1",{class:"text-5xl font-bold text-gray-600 md:text-2xl dark:text-gray-200"},"Panier")])],-1),ce={key:0,class:"w-full px-5 py-10 mx-0 text-gray-800 bg-white border-t border-b border-gray-200 rounded-md dark:bg-gray-800"},ue={class:"w-full"},pe={class:"items-start -mx-3 md:flex"},me={class:"px-3 md:w-7/12 lg:pr-10"},_e={class:"flex flex-col divide-y divide-gray-700"},ve={class:"flex flex-col py-6 sm:flex-row sm:justify-between"},ge={class:"flex w-full space-x-2 sm:space-x-4"},he=["src"],xe={class:"flex flex-col justify-between w-full pb-4"},be={class:"flex justify-between w-full pb-2 space-x-2"},fe={class:"space-y-1"},ye={class:"text-lg font-semibold leading-snug dark:text-gray-100 sm:pr-8"},we={class:"text-sm dark:text-gray-100"},ke={class:"text-right dark:text-gray-100"},Ve={class:"text-lg font-semibold"},ze=e("p",{class:"text-sm line-through"}," $",-1),Ce={class:"flex text-sm divide-x dark:text-white"},Me=["onClick"],Pe=P('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-4 h-4 fill-current"><path d="M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z"></path><rect width="32" height="200" x="168" y="216"></rect><rect width="32" height="200" x="240" y="216"></rect><rect width="32" height="200" x="312" y="216"></rect><path d="M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z"></path></svg><span>Retirer</span>',2),Se=[Pe],je={"x-data":"{ productQuantity: @json($item['quantity']) }"},Ne=e("label",{for:"Quantity",class:"sr-only"}," Quantity ",-1),Ue={class:"flex items-center gap-1"},Be=["disabled","onClick"],$e=["value"],Ee=["onClick"],Ie={class:"pb-6 mb-6 border-b border-gray-200"},He={class:"flex gap-1 mb-2 ml-1 text-sm font-semibold text-gray-600 dark:text-gray-200"},qe={class:"py-1.5"},Qe={class:"w-4 h-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Ae=e("path",{d:"M5.293 6.293a1 1 0 011.414 0L10 9.586l2.293-2.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"},null,-1),Re=[Ae],Te={class:"py-1.5"},Le={class:"w-4 h-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Oe=e("path",{d:"M14.293 15.293a1 1 0 01-1.414 0L10 12.414l-2.293 2.293a1 1 0 01-1.414-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 010 1.414z"},null,-1),Ze=[Oe],De={class:"flex items-end justify-end"},Ge={class:"flex-grow px-2 lg:max-w-md"},Fe={class:"p-2"},Je=e("div",{class:"p-2"},[e("button",{class:"block w-full max-w-xs px-5 py-2 mx-auto font-semibold text-white bg-gray-400 border border-transparent rounded-md hover:bg-gray-500 focus:bg-gray-500"},"APPLIQUER")],-1),Ke={class:"pb-6 mb-6 text-gray-800 border-b border-gray-200"},Xe={class:"flex items-center w-full mb-3"},Ye=e("div",{class:"flex-grow"},[e("span",{class:"text-gray-600 dark:text-gray-200"},"Sous total")],-1),We={class:"pl-3"},et={class:"font-semibold dark:text-gray-50"},tt=P('<div class="flex items-center w-full"><div class="flex-grow"><span class="text-gray-600 dark:text-gray-200">Taxes(GST)</span></div><div class="pl-3"><span class="font-semibold dark:text-gray-50">$0</span></div></div>',1),st={class:"pb-6 mb-6 text-xl text-gray-800 border-b border-gray-200 md:border-none"},ot={class:"flex items-center w-full"},at=e("div",{class:"flex-grow"},[e("span",{class:"text-gray-600 dark:text-gray-200"},"Total")],-1),lt={class:"pl-3"},rt=e("span",{class:"text-sm font-semibold text-gray-400 dark:text-gray-20"},null,-1),nt={class:"font-semibold"},it={class:"hidden w-full p-4 mb-4 font-semibold bg-white border border-gray-200 rounded-md dark:bg-gray-900"},dt={class:"flex flex-col gap-4"},ct={class:"w-full mx-auto mb-6 text-gray-800 bg-white border border-gray-200 rounded-lg top-8 dark:bg-gray-900"},ut={class:"hidden w-full p-6 border-b border-gray-200"},pt={class:"mb-5"},mt={for:"type1",class:"flex items-center cursor-pointer"},_t=e("img",{src:"https://www.jordanfinancialservices.com/2021/sites/default/files/images/logos/orange_money-01.jpg",class:"h-6 ml-3"},null,-1),vt={key:0,class:"px-2"},gt=e("div",{class:"relative grid grid-cols-3 gap-2 mb-3"},null,-1),ht=e("div",{class:"mt-4"},[e("button",{class:"block w-full select-none rounded-lg bg-amber-600 py-2 px-2 text-center align-middle font-sans text-sm font-bold uppercase text-white shadow-md shadow-pink-500/20 transition-all hover:shadow-lg hover:shadow-amber-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none","data-ripple-light":"true"},[e("span",null,"PAYER ($)")])],-1),xt=[gt,ht],bt={class:"w-full p-2 border-b border-gray-200 lg:p-6"},ft={class:"flex flex-wrap gap-4 mb-5"},yt={style:{display:"flex"}},wt={style:{display:"flex","flex-direction":"column"}},kt={class:"dark:text-gray-200"},Vt={key:0},zt={class:"grid grid-cols-1 gap-4 mb-4 lg:px-4"},Ct={class:"flex flex-col gap-4 px-3 mb-3"},Mt={key:1,class:"flex flex-col items-center justify-center gap-4 py-8"},Pt=e("h1",{class:"text-2xl"},"Votre panier est vide",-1),St=[Pt],jt={key:0},Nt=P('<div><div class="fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen" style="background:rgba(0, 0, 0, 0.3);"><div class="flex flex-col items-center px-5 py-2 bg-white border rounded-lg"><div class="relative block w-20 h-5 mt-2 loader-dots"><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div><div class="absolute top-0 w-3 h-3 mt-1 bg-green-500 rounded-full"></div></div><div class="mt-2 text-xs font-medium text-center text-gray-500"> Paiement en cours... </div></div></div></div>',1),Ut=[Nt],Bt={key:1,style:{background:"rgba(0, 0, 0, 0.3)"},class:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen"},$t={class:"flex flex-col items-center justify-center px-12 py-8 mx-4 bg-gray-100 rounded-lg"},Et={class:"w-32 h-32 px-12 py-12 mb-4 text-center text-gray-800 bg-gray-200 rounded-full"},It={class:"text-4xl font-bold"},Ht=e("p",{class:"text-lg"},null,-1),qt=e("p",{class:"mb-4 text-xl text-gray-700"},"Veuillez confirmer votre paiement",-1),Qt=e("p",{class:"max-w-md text-base text-gray-600 font-bega-light"},"Une fenêtre pop-up va s'ouvrir pour vous permettre de confirmer votre paiement. Veuillez suivre les instructions à l'écran pour compléter la transaction. Ne fermez pas ni ne rafraîchissez cette page pendant le processus de paiement.",-1),Zt=Object.assign({layout:le},{__name:"Checkout",props:{userSetting:Object},setup(R){var N,U,B,$,E,I,H,q;const v=J("$swal"),c=K(),g=R,a=r({numero:"",provider:"",adresse:(U=(N=g.userSetting)==null?void 0:N.addresse_facturation)==null?void 0:U.adresse,commune:($=(B=g.userSetting)==null?void 0:B.addresse_facturation)==null?void 0:$.commune,ville:(I=(E=g.userSetting)==null?void 0:E.addresse_facturation)==null?void 0:I.ville,pays:(q=(H=g.userSetting)==null?void 0:H.addresse_facturation)==null?void 0:q.pays}),T=r(["CD"]),w=Q(()=>c.items),k=Q(()=>c.totalCost),u=r(!1),V=r(!1);r(!1),r(!1);const h=r(!1),z=r(60);let S=null;const x=r(""),j=r(""),L=async()=>{try{h.value=!0;const o=await axios.post(route("checkoutMaxi"),{form:a.value,items:w.value,total:k.value});h.value=!1,x.value=o.data.order_id,j.value=o.data.transaction_id,console.log(o.data),o.data?o.data.result.code==0&&(console.log(o.data.result),S=setInterval(()=>{z.value--,z.value<=0&&(clearInterval(S),O())},1e3)):v.fire({title:error.message,icon:"error",text:"une erreur s'est produite veuillez ressayer",timerProgressBar:!0})}catch(o){h.value=!1,o.response&&v.fire({title:o.message,icon:"error",text:o.response.data,timerProgressBar:!0}),v.fire({title:o.message,icon:"error",text:o.message,timerProgressBar:!0})}},O=async()=>{ae.post(route("checkoutStatus"),{order_id:x.value,transaction_id:j.value},{onError:o=>{v.fire({title:o.message,icon:"error",text:o.message,timerProgressBar:!0})}}),x.value=null};r("");const Z=[{value:"10",label:"Orange Money",areaName:"orange",areaEnsignUrl:"https://www.jordanfinancialservices.com/2021/sites/default/files/images/logos/orange_money-01.jpg"},{value:"9",label:"Vodacom Mpesa",areaName:"Vodacom",areaEnsignUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSmtTAhz7LJHKfRf5ZGowNS3ZKJH_X_26iPUv3wzBkcug&s"},{value:"17",label:"airtel Money",areaName:"airtel",areaEnsignUrl:"https://zoom-eco.net/wp-content/uploads/2021/02/15.png"}];return(o,s)=>{const D=f("Error"),p=f("MazInput"),G=f("MazPhoneNumberInput"),F=f("ButtonMt");return l(),n("div",null,[e("div",ne,[e("div",ie,[de,e("div",null,[i(D)]),w.value.length>0?(l(),n("div",ce,[e("div",ue,[e("div",pe,[e("div",me,[e("ul",_e,[(l(!0),n(X,null,Y(w.value,t=>(l(),n("li",ve,[e("div",ge,[e("img",{class:"flex-shrink-0 object-cover w-20 h-20 rounded outline-none dark:border-transparent sm:w-32 sm:h-32 dark:bg-gray-500",src:t.image,alt:"service"},null,8,he),e("div",xe,[e("div",be,[e("div",fe,[e("h3",ye,d(t.name),1),e("p",we,d(t.basic),1)]),e("div",ke,[e("p",Ve,"$"+d(t.price*t.quantity),1),ze])]),e("div",Ce,[e("button",{type:"button",onClick:b=>_(c).removeItem(t.id),class:"flex items-center px-2 py-1 pl-0 space-x-1"},Se,8,Me),e("div",null,[e("div",je,[Ne,e("div",Ue,[e("button",{type:"button",disabled:t.quantity===1,onClick:b=>_(c).updateItemQuantity(t.id,t.quantity--),class:"w-10 h-10 leading-10 text-gray-600 transition hover:opacity-75"}," − ",8,Be),e("input",{disabled:"",type:"number",id:"Quantity",value:t.quantity,class:"h-10 w-16 rounded border-gray-200 dark:bg-gray-700 text-center [-moz-appearance:_textfield] sm:text-sm [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none"},null,8,$e),e("button",{type:"button",onClick:b=>_(c).updateItemQuantity(t.id,t.quantity++),class:"w-10 h-10 leading-10 text-gray-600 transition hover:opacity-75"}," + ",8,Ee)])])])])])])]))),256))]),e("div",Ie,[e("button",{onClick:s[0]||(s[0]=t=>u.value=!u.value),class:""},[e("label",He,[C("Coupon de reduction code "),e("span",qe,[y((l(),n("svg",Qe,Re,512)),[[M,!u.value]])]),e("span",Te,[y((l(),n("svg",Le,Ze,512)),[[M,u.value]])])])]),y(e("div",De,[e("div",Ge,[e("div",Fe,[i(p)])]),Je],512),[[M,u.value]])]),e("div",Ke,[e("div",Xe,[Ye,e("div",We,[e("span",et,d(k.value)+" $",1)])]),tt]),e("div",st,[e("div",ot,[at,e("div",lt,[rt,e("span",nt,d(k.value)+" $",1)])])])]),e("form",{onSubmit:W(L,["prevent"]),class:"flex flex-col px-2 md:w-5/12"},[e("div",null,[e("div",it,[e("div",dt,[i(p,{label:"Addresse",type:"Addresse",modelValue:a.value.adresse,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value.adresse=t)},null,8,["modelValue"]),i(p,{label:"commune",type:"commune",modelValue:a.value.commune,"onUpdate:modelValue":s[2]||(s[2]=t=>a.value.commune=t)},null,8,["modelValue"]),i(p,{label:"ville",type:"ville",modelValue:a.value.ville,"onUpdate:modelValue":s[3]||(s[3]=t=>a.value.ville=t)},null,8,["modelValue"]),i(p,{label:"Pays",type:"Pays",modelValue:a.value.pays,"onUpdate:modelValue":s[4]||(s[4]=t=>a.value.pays=t)},null,8,["modelValue"])])]),e("div",ct,[e("div",ut,[e("div",pt,[e("label",mt,[y(e("input",{type:"checkbox",class:"w-5 h-5 text-indigo-500 form-radio",id:"type1","onUpdate:modelValue":s[5]||(s[5]=t=>V.value=t),onClick:s[6]||(s[6]=t=>o.isProviderToogle("orange"))},null,512),[[ee,V.value]]),_t])]),V.value?(l(),n("div",vt,xt)):m("",!0)]),e("div",bt,[e("div",ft,[i(_(re),{modelValue:a.value.provider,"onUpdate:modelValue":s[7]||(s[7]=t=>a.value.provider=t),options:Z,color:"primary"},{default:A(({option:t,selected:b})=>[e("div",yt,[t.areaEnsignUrl?(l(),te(_(se),{key:0,src:t.areaEnsignUrl,style:{"margin-right":"16px"},size:"0.8rem"},null,8,["src"])):m("",!0),e("div",wt,[e("span",kt,d(t.label),1),e("span",{class:oe({"maz-text-muted":!b})},d(t.areaName),3)])])]),_:1},8,["modelValue"])]),a.value.provider!==""?(l(),n("div",Vt,[e("div",null,[e("div",zt,[i(G,{label:"Telephone","only-countries":T.value,success:!1,required:"",modelValue:a.value.numero,"onUpdate:modelValue":s[8]||(s[8]=t=>a.value.numero=t),translations:{countrySelector:{placeholder:"Code pays",error:"Choisissez un pays",searchPlaceholder:"Rechercher un pays"},phoneInput:{placeholder:"Numéro de téléphone",example:"Exemple :"}}},null,8,["only-countries","modelValue"])]),e("div",Ct,[i(F,{type:"submit"},{default:A(()=>[C(" payer ")]),_:1})]),C(" "+d(a.value.provider),1)])])):m("",!0)])])])],32)])])])):(l(),n("div",Mt,St))]),h.value?(l(),n("div",jt,Ut)):m("",!0),x.value?(l(),n("div",Bt,[e("div",$t,[e("div",Et,[e("p",It,d(z.value),1),Ht]),qt,Qt])])):m("",!0)])])}}});export{Zt as default};
