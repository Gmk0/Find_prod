import{q as ie,I as de,B as ce,o,c as a,b as e,r as ze,n as _,u as b,g,Q as Fe,E as O,T as re,s as S,f as r,h as d,t as y,w as m,F as j,l as N,U as Ve,A as Me,i as Le,e as Te,R,H as Ue,V as De,v as H,X as Ee,O as Ne,p as Re,a as He,x as Ae}from"./app-20d75b28.js";/* empty css                                                          */import{i as qe}from"./index-2630c011.js";const Ze={class:""},Oe={__name:"ChatLayout",setup(B){const $=de();ce(()=>{qe()});function f(){window.innerWidth<768&&$.ToogleFalse()}return f(),(w,W)=>(o(),a("div",{class:_(["overflow-hidden has-min-sidebar",{"is-sidebar-open":b($).SidebarExpanded}])},[e("main",Ze,[ze(w.$slots,"default",{},void 0,!0)])],2))}},Hs=ie(Oe,[["__scopeId","data-v-d044a4f7"]]);const c=B=>(Re("data-v-3e5fbe4a"),B=B(),He(),B),We={class:"chat-header h-[61px] border-b border-slate-150 dark:border-navy-700 relative z-10 flex w-full shrink-0 items-center justify-between bg-white px-[calc(var(--margin-x)-.5rem)] shadow-sm transition-[padding,width] duration-[.25s] dark:bg-navy-800"},Ge={class:"flex items-center space-x-5"},Ye={class:"ml-1 h-7 w-7"},Qe=c(()=>e("span",null,null,-1)),Xe=c(()=>e("span",null,null,-1)),Je=c(()=>e("span",null,null,-1)),Ke=[Qe,Xe,Je],et={key:0,class:"w-12 h-12"},tt={class:"font-medium text-slate-700 line-clamp-1 dark:text-navy-100"},st={key:0,class:"mt-0.5 text-xs"},ot={key:1,class:"mt-0.5 text-xs"},at={class:"flex px-4 -mr-1 gap-4items-center"},lt=c(()=>e("button",{class:"w-6 h-6 p-0 rounded-full btn2 text-slate-500 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:text-navy-200 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),nt=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.25 21.167h5.5c4.584 0 6.417-1.834 6.417-6.417v-5.5c0-4.583-1.834-6.417-6.417-6.417h-5.5c-4.583 0-6.417 1.834-6.417 6.417v5.5c0 4.583 1.834 6.417 6.417 6.417ZM13.834 2.833v18.334"})],-1)),rt=[nt],it={key:0,class:"space-y-5"},dt={key:0,class:"flex items-center mx-4 space-x-3"},ct=c(()=>e("div",{class:"flex-1 h-px bg-slate-200 dark:bg-navy-500"},null,-1)),ut=c(()=>e("div",{class:"flex-1 h-px bg-slate-200 dark:bg-navy-500"},null,-1)),vt={class:"flex flex-col items-start space-y-3.5"},pt=["onMouseenter"],ht={key:0,class:"flex mx-1"},mt={key:0,id:"dropdownMenuIconButton","data-dropdown-toggle":"dropdownDots",class:"inline-flex items-center p-2 text-sm font-medium text-center text-gray-900 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none dark:text-white focus:ring-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button"},ft=c(()=>e("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 4 15"},[e("path",{d:"M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})],-1)),gt=[ft],_t=["onClick"],bt=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1)),xt=c(()=>e("span",null,"Effacer",-1)),kt=[bt,xt],wt=["innerHTML"],yt={key:0},Ct=c(()=>e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},"Ce message est lié à un service :",-1)),St={class:"flex flex-col"},jt={class:"flex items-center p-3 bg-gray-200 rounded-t-lg shadow-sm dark:bg-navy-700 dark:text-navy-100"},Bt=["src"],It={class:"p-2 bg-gray-200 border-t border-gray-300 rounded-b-lg shadow-sm dark:bg-navy-700"},$t={key:1},Pt={class:"flex gap-2 mt-4"},zt={key:2,class:"mt-2"},Ft={key:3,class:"flex items-center justify-end"},Vt=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Mt=[Vt],Lt={key:4},Tt={key:0,class:"relative mt-2 group"},Ut=["src"],Dt={class:"absolute top-0 flex items-center justify-center w-full h-full transition-all duration-300 rounded-lg opacity-0 bg-black/30 group-hover:opacity-100"},Et=["href"],Nt=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),Rt=[Nt],Ht=["href"],At={key:0},qt=Ae('<div class="flex flex-col items-center justify-center mt-8" data-v-3e5fbe4a><div class="flex flex-col items-center mx-4 space-x-3" data-v-3e5fbe4a><div class="p-2 bg-yellow-100 rounded-md" data-v-3e5fbe4a><p class="text-lg text-gray-800" data-v-3e5fbe4a>Pour plus de sécurité et votre protection, effectuez les paiements et les communications directement sur FIND.</p></div><div class="w-4/12 py-8" data-v-3e5fbe4a><img src="/images/illustrations/chat-ui.svg" alt="illustation" data-v-3e5fbe4a></div></div></div>',1),Zt=[qt],Ot={class:"chat-footer relative flex h-16 w-full shrink-0 items-center justify-between border-t border-slate-150 bg-white px-[calc(var(--margin-x)-.25rem)] transition-[padding,width] duration-[.25s] dark:border-navy-600 dark:bg-navy-800"},Wt={class:"-ml-1.5 flex flex-1 space-x-2"},Gt=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),Yt=[Gt],Qt={class:"-mr-1.5 flex"},Xt=c(()=>e("button",{class:"hidden w-6 h-6 p-0 rounded-full btn22 shrink-0 text-slate-500 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:text-navy-200 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),Jt=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.813 5.146 9.027 3.99c4.05 1.79 4.05 4.718 0 6.508l-9.027 3.99c-6.074 2.686-8.553.485-5.515-4.876l.917-1.613c.232-.41.232-1.09 0-1.5l-.917-1.623C1.26 4.66 3.749 2.46 9.813 5.146ZM6.094 12.389h7.341"})],-1)),Kt=[Jt],es={key:0,class:"fixed sidebar-user right-0 top-0 z-[101] h-full w-full sm:w-80"},ts={key:0,class:"flex flex-col w-full h-full transition-transform duration-200 bg-white border-l border-slate-150 dark:border-navy-600 dark:bg-navy-750"},ss={class:"flex h-[60px] items-center justify-between p-4"},os=c(()=>e("h3",{class:"text-base font-medium text-slate-700 dark:text-navy-100"}," Utilisateur info ",-1)),as={class:"-mr-1.5 flex space-x-1"},ls=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1)),ns=[ls],rs={class:"flex flex-col items-center mt-5"},is={key:0,class:"w-10 h-10"},ds=["textContent"],cs=c(()=>e("p",null,null,-1)),us=c(()=>e("div",{class:"mt-2 flex space-x-1.5"},[e("button",{class:"hidden w-10 h-10 p-0 rounded-full btn2 text-slate-600 hover:bg-slate-300/20 hover:text-primary focus:bg-slate-300/20 focus:text-primary active:bg-slate-300/25 dark:text-navy-100 dark:hover:bg-navy-300/20 dark:hover:text-accent dark:focus:bg-navy-300/20 dark:focus:text-accent dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])]),e("button",{class:"hidden w-10 h-10 p-0 rounded-full btn2 text-slate-600 hover:bg-slate-300/20 hover:text-primary focus:bg-slate-300/20 focus:text-primary active:bg-slate-300/25 dark:text-navy-100 dark:hover:bg-navy-300/20 dark:hover:text-accent dark:focus:bg-navy-300/20 dark:focus:text-accent dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])]),e("button",{class:"hidden w-10 h-10 p-0 rounded-full btn2 text-slate-600 hover:bg-slate-300/20 hover:text-primary focus:bg-slate-300/20 focus:text-primary active:bg-slate-300/25 dark:text-navy-100 dark:hover:bg-navy-300/20 dark:hover:text-accent dark:focus:bg-navy-300/20 dark:focus:text-accent dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])])],-1)),vs={class:"flex flex-col mt-6"},ps={class:"px-4 overflow-x-auto is-scrollbar-hidden"},hs={class:"flex tabs-list"},ms={class:"px-4 pt-4 tab-content"},fs={key:0},gs={class:"grid grid-cols-4 gap-2"},_s={key:0},bs=["src","alt"],xs={key:1},ks={class:"flex flex-col space-y-3.5"},ws={key:0},ys=["href"],Cs=c(()=>e("div",{class:"flex items-center justify-center text-white mask is-squircle h-11 w-11 bg-warning"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),Ss={class:"block max-w-md"},js={class:"block font-medium break-before-auto text-slate-700 dark:text-navy-100"},Bs={class:"card"},Is={class:"flex flex-wrap flex-1 gap-2 justify-content-between align-items-center"},$s={class:"flex gap-2"},Ps=c(()=>e("p",null,"Glissez-déposez des fichiers ici pour les télécharger.",-1)),zs={class:"mt-1"},Fs={class:"flex justify-end gap-4 mt-4"},Vs={class:"p-2 mb-4"},Ms=c(()=>e("div",{class:"mb-4"},[e("label",{for:"price",class:"block mb-1 font-bold"},"Proposer un prix :")],-1)),Ls={class:"flex gap-4"},Ts={class:"mb-4"},Us={class:"flex gap-4"},Ds={__name:"BodyMessage",props:{messages:Array,user:Object,chatId:String},setup(B){var ee,te,se;const $=de(),f=g(!0),w=g("tabImages");function W(){typeof window<"u"&&(window.innerWidth>800?f.value=!0:f.value=!1)}W();const P=Fe();var ue={soundurl:"/sound/bell.mp3"};const ve=()=>{var s=new Audio(ue.soundurl);s.play()},A=g(""),x=O(()=>i.user),L=g(!1);g(0);const z=g(null);g([]);const i=B,k=re({message:"",chat:i.chatId,user:(ee=i.user)==null?void 0:ee.id,files:null}),F=g(!1),T=g(!1),U=g(!1),pe=s=>{u.proposalId=s,U.value=!0},he=s=>{u.proposalId=s,T.value=!0},me=()=>{u.proposalId!=""&&u.post(route("declinePropasalUser"),{preserveScroll:!0,onFinish:()=>{T.value=!1,M()}})},fe=()=>{u.proposalId!=""&&u.post(route("acceptPropasalUser"),{preserveScroll:!0,onFinish:()=>{U.value=!1,M()}})};g(!1);const V=g(!1),ge=async s=>{try{const t=await Ee.post(route("proposalGetPrice"),{proposal_id:s});u.price=t.data.price,u.proposalId=s,V.value=!V.value}catch{}},_e=()=>{u.proposalId!=""?u.post(route("proposalChangePrice"),{preserveScroll:!0,onFinish:()=>{V.value=!1,u.service_id=""}}):alert("id absence")},be=()=>{},u=re({price:"",service_id:"",freelance_user_id:(te=i.user)==null?void 0:te.id,user_id:(se=i.user)==null?void 0:se.id,chat_id:i.chatId,proposalId:""}),xe=s=>{u.service_id=s,u.service_id!=""?F.value=!F.value:alert("id absence")},ke=()=>{u.service_id!=""?u.post(route("proposalPrice"),{preserveScroll:!0,onFinish:()=>{F.value=!1,u.service_id="",M()}}):alert("id absence")},G=()=>{var v;let s=new Date;s.getFullYear(),s.getMonth()+1,s.getDate();const t={id:null,body:k.message,sender_id:P.props.auth.user.id,receiver_id:(v=i.user)==null?void 0:v.id,temporary:!0};i.messages.push(t),M(),ve(),k.post(route("chat.Send"),{preserveScroll:!0,onSuccess:()=>{}}),Q(),k.reset("message")},M=()=>{setTimeout(()=>{z.value.scrollTop=z.value.scrollHeight},0)};O(()=>{if(!i.messages)return null;const s={};return i.messages.forEach(t=>{const v=t.created_at?X(t.created_at):null;s[v]||(s[v]=[]),s[v].push(t)}),s});const Y=O(()=>{if(!i.messages)return null;const s={};return i.messages.forEach((t,v)=>{const p=t.created_at?X(t.created_at):null;s[p]||(s[p]=[]),s[p].push({message:t,shouldRenderButtons:je(t,v),shouldRenderChangerButton:Be(t,v)})}),s}),we=s=>{k.files=s.files},Q=()=>{L.value=!1,k.reset("files","message")},X=s=>{const t=new Date(s);return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`};ce(()=>{Ce()});const ye=s=>{Ne.post(route("deleteMessage"),{message_id:s.id},{onSuccess:()=>{},onError:t=>{}})};window.Echo.private(`chat.${P.props.auth.user.id}`).listen("MessageSent",s=>{M()});const Ce=()=>{const s=z.value,t=s.scrollHeight,v=500,p=performance.now(),D=Z=>{const E=Z-p,C=E/v;s.scrollTop=Math.min(C*t,t),E<v&&window.requestAnimationFrame(D)};window.requestAnimationFrame(D)},Se=()=>{z.value.scrollTop},q=s=>{let t=["jpg","jpeg","png","gif","bmp"],v=s.split(".").pop().toLowerCase();return t.includes(v)},J=s=>s.split("/").pop(),K=s=>{const t=new Date(s),v=t.getHours().toString().padStart(2,"0"),p=t.getMinutes().toString().padStart(2,"0");return`${v}:${p}`},je=(s,t)=>s.proposal!=null&&s.proposal.status==="pending"&&P.props.auth.user.id===s.proposal_user&&s.sender_id!==s.proposal_user&&Ie(t),Be=(s,t)=>s.proposal!=null&&s.proposal.status==="rejected"&&s.receiver_id===P.props.auth.user.id&&P.props.auth.user.id!=s.proposal_user&&$e(t),Ie=s=>{for(let t=i.messages.length-1;t>=0;t--)if(i.messages[t].proposal&&i.messages[t].proposal.status==="pending")return t===s;return!1},$e=s=>{for(let t=i.messages.length-1;t>=0;t--)if(i.messages[t].proposal&&i.messages[t].proposal.status==="rejected")return t===s;return!1};return(s,t)=>{var ae,le,ne;const v=S("Photo"),p=S("Button"),D=S("Toast"),Z=S("FileUpload"),E=S("MazInput"),C=S("Dialog"),oe=S("MazInputNumber");return o(),a("main",{class:_(["flex flex-col w-full font-bega-light mt-0 main-content h-[100vh] chat-app",f.value&&"lg:mr-80"])},[e("div",We,[e("div",Ge,[e("div",Ye,[e("button",{class:_(["menu-toggle ml-0.5 flex h-7 w-7 flex-col justify-center space-y-1.5 text-primary outline-none focus:outline-none dark:text-accent-light/80",b($).isSidebarExpanded&&"active"]),onClick:t[0]||(t[0]=n=>b($).toogleRight())},Ke,2)]),e("div",{onClick:t[1]||(t[1]=n=>f.value=!0),class:"flex items-center space-x-4 cursor-pointer font-inter"},[x.value!=null?(o(),a("div",et,[r(v,{user:x.value,taille:"12"},null,8,["user"])])):d("",!0),e("div",null,[e("p",tt,y((ae=x.value)==null?void 0:ae.name),1),(le=x.value)!=null&&le.is_online?(o(),a("p",st,"En ligne ")):(o(),a("p",ot,y((ne=x.value)==null?void 0:ne.last_activity),1))])])]),e("div",at,[lt,e("button",{onClick:t[2]||(t[2]=n=>f.value=!f.value),class:_([f.value?"text-primary dark:text-accent-light":"text-slate-500 dark:text-navy-200","p-0 rounded-full btn2 h-7 w-7 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"])},rt,2)])]),e("div",{class:"grow overflow-y-auto scrollbar-sm px-[calc(var(--margin-x)-.5rem)] py-5 transition-all duration-[.25s]",ref_key:"scrollContainer",ref:z,onScroll:Se},[r(R,{"enter-class":"transition-all duration-500 easy-in-out","enter-active-class":"transition-all duration-500 easy-in-out","enter-to-class":"opacity-100 [transform:translate3d(0,0,0)]"},{default:m(()=>[Y.value?(o(),a("div",it,[(o(!0),a(j,null,N(Y.value,(n,h)=>(o(),a(j,{key:h},[h!=="null"?(o(),a("div",dt,[ct,e("p",null,y(h),1),ut])):d("",!0),(o(!0),a(j,null,N(n,(l,Pe)=>(o(),a("div",{key:Pe},[e("div",{class:_([l.message.receiver_id==i.user.id?"justify-end ":"items-start","flex space-x-2.5 sm:space-x-5"])},[e("div",{class:_([l.message.receiver_id==i.user.id?"hidden":"hidden  md:flex",""])},[r(v,{user:x.value,taille:"10"},null,8,["user"])],2),e("div",vt,[e("div",{class:_([l.message.receiver_id==i.user.id?"ml-4 md:ml-10 ":"mr-4 sm:mr-10","max-w-lg"])},[e("div",{class:"flex",onMouseenter:I=>A.value=l.message.id,onMouseleave:t[3]||(t[3]=I=>A.value=null)},[l.message.receiver_id==i.user.id?(o(),a("div",ht,[r(Ve,{align:"right",width:"48"},{trigger:m(()=>[A.value===l.message.id?(o(),a("button",mt,gt)):d("",!0)]),content:m(()=>[e("button",{onClick:I=>ye(l.message),class:"flex items-center w-full gap-4 px-4 py-2 text-sm leading-5 text-left text-gray-700 transition duration-150 ease-in-out dark:text-gray-50 hover:dark:bg-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},kt,8,_t)]),_:2},1024)])):d("",!0),l.message.body!=null?(o(),a("div",{key:1,class:_([l.message.receiver_id==i.user.id?"rounded-br-none dark:text-white bg-info/10 text-slate-700 dark:bg-accent":" bg-white text-slate-700 dark:text-navy-100 dark:bg-navy-700 rounded-tl-none ","p-3 shadow-sm rounded-2xl"])},[e("p",{innerHTML:l.message.body},null,8,wt)],2)):d("",!0)],40,pt),l.message.service!=null?(o(),a("div",yt,[Ct,e("div",St,[e("div",jt,[e("img",{class:"w-10 h-10 mr-2 rounded-lg",src:"/storage/"+l.message.service.files[0],alt:"Service Image"},null,8,Bt),r(b(Me),{href:s.route("oneService",[l.message.user_service.slug,l.message.service.slug]),class:"truncate hover:text-amber-500"},{default:m(()=>[Le(y(l.message.service.title),1)]),_:2},1032,["href"])]),e("div",It,[s.$page.props.auth.user.id!=l.message.user_service.id?(o(),Te(p,{key:0,size:"small",outlined:"",onClick:I=>xe(l.message.service.id),label:"Discuter prix"},null,8,["onClick"])):d("",!0)])])])):d("",!0),l.shouldRenderButtons?(o(),a("div",$t,[e("div",Pt,[r(p,{size:"small",outlined:"",onClick:I=>pe(l.message.proposal.id),label:"Accepter"},null,8,["onClick"]),r(p,{size:"small",severity:"danger",outlined:"",onClick:I=>he(l.message.proposal.id),label:"Refuser"},null,8,["onClick"])])])):d("",!0),l.shouldRenderChangerButton?(o(),a("div",zt,[r(p,{size:"small",outlined:"",onClick:I=>ge(l.message.proposal.id),label:"Changer"},null,8,["onClick"])])):d("",!0),l.message.temporary!=null?(o(),a("span",Ft,Mt)):d("",!0),l.message.file!=null?(o(),a("div",Lt,[q(l.message.file[0])?(o(),a("div",Tt,[e("img",{class:"object-cover rounded-lg h-44",src:"/storage/"+l.message.file[0],alt:"image"},null,8,Ut),e("div",Dt,[e("a",{href:"/storage/"+l.message.file[0],target:"_blank",class:"p-0 font-medium text-white rounded-full btn2 h-9 w-9 bg-info hover:bg-info-focus focus:bg-info-focus active:bg-info-focus/90"},Rt,8,Et)])])):(o(),a("a",{key:1,href:"/storage/"+l.message.file[0],target:"_blank",class:_([l.message.receiver_id==i.user.id?"rounded-br-none dark:text-white bg-info/10 text-slate-700 dark:bg-accent":" bg-white text-slate-700 dark:text-navy-100 dark:bg-navy-700 rounded-tl-none ","p-3 mb-4 shadow-sm rounded-2xl"])},y(J(l.message.file[0])),11,Ht))])):d("",!0),K(l.message.created_at)!=="NaN:NaN"?(o(),a("p",{key:5,class:_([l.message.receiver_id==i.user.id?" text-left":"text-right","mt-2 ml-auto text-xs text-right text-slate-400 dark:text-navy-300"])},y(K(l.message.created_at)),3)):d("",!0)],2)])],2)]))),128))],64))),128))])):d("",!0)]),_:1}),i.messages.length===0?(o(),a("div",At,Zt)):d("",!0)],544),e("div",Ot,[e("div",Wt,[e("button",{onClick:t[4]||(t[4]=n=>L.value=!0),class:"w-6 h-6 p-0 rounded-full btn22 shrink-0 text-slate-500 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:text-navy-200 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"},Yt),Ue(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>b(k).message=n),class:"w-full h-10 bg-transparent border-none focus:ring-0 placeholder:text-slate-400/70",placeholder:"Ecrivez un message"},null,512),[[De,b(k).message]])]),e("div",Qt,[Xt,e("button",{onClick:t[6]||(t[6]=n=>G()),class:"w-10 h-10 p-0 rounded-full btn22 shrink-0 text-primary hover:bg-primary/20 focus:bg-primary/20 active:bg-primary/25 dark:text-accent-light dark:hover:bg-accent-light/20 dark:focus:bg-accent-light/20 dark:active:bg-accent-light/25"},Kt)])]),f.value?(o(),a("div",es,[r(R,{"enter-class":"ease-out transform-gpu ","enter-to-class":"duration-500 translate-x-0","enter-active-class":"translate-x-full","leave-class":"ease-in transform-gpu","leave-to-class":"translate-x-0","leave-active-class":"-translate-x-full"},{default:m(()=>{var n;return[f.value?(o(),a("div",ts,[e("div",ss,[os,e("div",as,[e("button",{onClick:t[7]||(t[7]=h=>f.value=!1),class:"w-8 h-8 p-0 rounded-full btn2 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"},ns)])]),e("div",rs,[x.value?(o(),a("div",is,[r(v,{user:x.value,taille:"10"},null,8,["user"])])):d("",!0),e("h3",{textContent:y((n=x.value)==null?void 0:n.name),class:"mt-2 text-lg font-medium text-slate-700 dark:text-navy-100"},null,8,ds),cs,us]),e("div",vs,[e("div",ps,[e("div",hs,[e("button",{onClick:t[8]||(t[8]=h=>w.value="tabImages"),class:_([w.value==="tabImages"?"border-amber-500  text-primary dark:text-accent-light":"border-transparent hover:text-slate-800 focus:text-slate-800 dark:hover:text-navy-100 dark:focus:text-navy-100","px-3 py-2 font-medium border-b-2 rounded-none btn2 shrink-0"])}," Images ",2),e("button",{onClick:t[9]||(t[9]=h=>w.value="tabFiles"),class:_([w.value==="tabFiles"?"border-amber-500  text-primary dark:text-accent-light":"border-transparent hover:text-slate-800 focus:text-slate-800 dark:hover:text-navy-100 dark:focus:text-navy-100","px-3 py-2 font-medium border-b-2 rounded-none btn2 shrink-0"])}," Fichier ",2)])]),e("div",ms,[w.value==="tabImages"?(o(),a("div",fs,[r(R,{name:"image",mode:"out-in"},{default:m(()=>[e("div",gs,[(o(!0),a(j,null,N(i.messages,h=>(o(),a(j,null,[h.file!=null?(o(),a("div",_s,[q(h.file[0])?(o(),a("img",{key:0,class:"object-cover object-center rounded-lg aspect-square",src:"/storage/"+h.file[0],alt:h.file[0]},null,8,bs)):d("",!0)])):d("",!0)],64))),256))])]),_:1})])):d("",!0),w.value==="tabFiles"?(o(),a("div",xs,[r(R,{name:"image",mode:"out-in"},{default:m(()=>[e("div",ks,[(o(!0),a(j,null,N(i.messages,h=>(o(),a(j,null,[h.file!=null?(o(),a("div",ws,[q(h.file[0])?d("",!0):(o(),a("a",{key:0,href:"/storage/"+h.file[0],target:"_blank",class:"flex items-center space-x-3 cursor-pointer"},[Cs,e("div",Ss,[e("p",js,y(J(h.file[0])),1)])],8,ys))])):d("",!0)],64))),256))])]),_:1})])):d("",!0)])])])):d("",!0)]}),_:1})])):d("",!0),r(C,{visible:L.value,"onUpdate:visible":t[13]||(t[13]=n=>L.value=n),position:"bottom",modal:"",header:"Fichier",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[e("div",null,[e("div",Bs,[r(D),r(Z,{name:"demo[]",auto:!0,onSelect:we,multiple:!0,maxFileSize:5e6},{header:m(({chooseCallback:n})=>[e("div",Is,[e("div",$s,[r(p,{onClick:h=>n(),icon:"pi pi-images",rounded:"",outlined:""},null,8,["onClick"])])])]),empty:m(()=>[Ps]),_:1})]),e("div",zs,[r(E,{modelValue:b(k).message,"onUpdate:modelValue":t[10]||(t[10]=n=>b(k).message=n),placeholder:"Rajouter un message"},null,8,["modelValue"])]),e("div",Fs,[r(p,{label:"Envoyer",outlined:"",onClick:t[11]||(t[11]=n=>G())}),r(p,{severity:"danger",outlined:"",onClick:t[12]||(t[12]=n=>Q()),label:"Annuler"})])])]),_:1},8,["visible"]),r(C,{visible:F.value,"onUpdate:visible":t[15]||(t[15]=n=>F.value=n),position:"bottom",modal:"",header:"Proposer un prix ",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[e("div",null,[e("form",{onSubmit:H(ke,["prevent"])},[e("div",Vs,[r(oe,{modelValue:b(u).price,"onUpdate:modelValue":t[14]||(t[14]=n=>b(u).price=n),placeholder:"Proposer un prix"},null,8,["modelValue"])]),r(p,{type:"submit",label:"Proposer"})],32)])]),_:1},8,["visible"]),r(C,{visible:U.value,"onUpdate:visible":t[16]||(t[16]=n=>U.value=n),position:"bottom",modal:"",header:"Accepter prix ",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[e("div",null,[e("form",{onSubmit:H(fe,["prevent"])},[Ms,r(p,{type:"submit",label:"Accepter"})],32)])]),_:1},8,["visible"]),r(C,{visible:T.value,"onUpdate:visible":t[17]||(t[17]=n=>T.value=n),position:"bottom",modal:"",header:"Refuser prix ",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[e("div",null,[e("form",{onSubmit:H(me,["prevent"])},[e("div",Ls,[r(p,{type:"submit",severety:"danger",outlined:"",label:"Refuser"})])],32)])]),_:1},8,["visible"]),r(C,{visible:V.value,"onUpdate:visible":t[19]||(t[19]=n=>V.value=n),position:"bottom",modal:"",header:"Changer prix ",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[e("div",null,[e("form",{onSubmit:H(_e,["prevent"])},[e("div",Ts,[r(oe,{modelValue:b(u).price,"onUpdate:modelValue":t[18]||(t[18]=n=>b(u).price=n),placeholder:"Prix du service"},null,8,["modelValue"])]),e("div",Us,[r(p,{type:"submit",label:"Changer",outlined:""}),r(p,{onClick:be,outlined:"",severity:"danger",label:"Annuler"})])],32)])]),_:1},8,["visible"])],2)}}},As=ie(Ds,[["__scopeId","data-v-3e5fbe4a"]]);export{As as B,Hs as C};
