import{T as N,g as _,s as U,e as w,w as r,o as u,c as f,b as t,f as s,j as E,H as g,P as y,ac as z,i as c,v as b,h as k,u as o,k as h,A as B,n as q,O as M}from"./app-8ff355bf.js";import{_ as T}from"./ActionMessage-a2244d83.js";import{_ as F}from"./FormSection-55c221f3.js";import{_ as O}from"./PrimaryButton-17fd0ae4.js";import{_ as x}from"./SecondaryButton-0f9c58c4.js";import"./SectionTitle-625eef56.js";const A=t("h1",{class:"dark:text-gray-50"}," Profile Information",-1),D=t("span",{class:"dark:text-gray-50"}," Mettre à jour les informations de profil et l'adresse e-mail de votre compte",-1),L={key:0,class:"col-span-6 sm:col-span-4"},R={class:"mt-2"},H=["src","alt"],G=["src","alt"],J={class:"mt-2"},K={class:"col-span-6 sm:col-span-4"},Q={class:"col-span-6 sm:col-span-4"},W={key:0},X={class:"mt-2 text-sm"},Y={class:"mt-2 text-sm text-green-600 font-bega-medium"},Z={class:"col-span-6 sm:col-span-4"},re={__name:"UpdateProfileInformationForm",props:{user:Object},setup(n){const v=n,e=N({_method:"PUT",name:v.user.name,email:v.user.email,phone:v.user.phone,photo:null}),P=_(null),m=_(null),i=_(null),S=()=>{i.value&&(e.photo=i.value.files[0]),e.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>V()})},C=()=>{P.value=!0},I=()=>{i.value.click()},$=()=>{const a=i.value.files[0];if(!a)return;const l=new FileReader;l.onload=d=>{m.value=d.target.result},l.readAsDataURL(a)},j=()=>{M.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{m.value=null,V()}})},V=()=>{var a;(a=i.value)!=null&&a.value&&(i.value.value=null)};return(a,l)=>{const d=U("MazInput");return u(),w(F,{onSubmitted:S},{title:r(()=>[A]),description:r(()=>[D]),form:r(()=>[a.$page.props.jetstream.managesProfilePhotos?(u(),f("div",L,[t("input",{ref_key:"photoInput",ref:i,type:"file",class:"hidden",onChange:$},null,544),s(E,{for:"photo",value:"Photo"}),g(t("div",R,[n.user.profile_photo_path!=null?(u(),f("img",{key:0,src:"/storage/"+n.user.profile_photo_path,alt:n.user.name,class:"object-cover w-20 h-20 rounded-full"},null,8,H)):(u(),f("img",{key:1,src:n.user.profile_photo_url,alt:n.user.name,class:"object-cover w-20 h-20 rounded-full"},null,8,G))],512),[[y,!m.value]]),g(t("div",J,[t("span",{class:"block w-20 h-20 bg-center bg-no-repeat bg-cover rounded-full",style:z("background-image: url('"+m.value+"');")},null,4)],512),[[y,m.value]]),s(x,{class:"mt-2 mr-2",type:"button",onClick:b(I,["prevent"])},{default:r(()=>[c(" Selectionner une Nouvelle Photo ")]),_:1}),n.user.profile_photo_path?(u(),w(x,{key:0,type:"button",class:"mt-2",onClick:b(j,["prevent"])},{default:r(()=>[c(" Effacer la Photo ")]),_:1})):k("",!0),s(h,{message:o(e).errors.photo,class:"mt-2"},null,8,["message"])])):k("",!0),t("div",K,[s(d,{modelValue:o(e).name,"onUpdate:modelValue":l[0]||(l[0]=p=>o(e).name=p),type:"text",required:"",label:"Nom d'utilisateur"},null,8,["modelValue"]),s(h,{message:o(e).errors.name,class:"mt-2"},null,8,["message"])]),t("div",Q,[s(d,{modelValue:o(e).email,"onUpdate:modelValue":l[1]||(l[1]=p=>o(e).email=p),type:"email",label:"email",required:"",autocomplete:"username"},null,8,["modelValue"]),s(h,{message:o(e).errors.email,class:"mt-2"},null,8,["message"]),a.$page.props.jetstream.hasEmailVerification&&n.user.email_verified_at===null?(u(),f("div",W,[t("p",X,[c(" Votre addresse email n'est pas verifié. "),s(o(B),{href:a.route("verification.send"),method:"post",as:"button",class:"text-sm text-gray-600 underline rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:b(C,["prevent"])},{default:r(()=>[c(" Cliquez ici pour renvoyer l'adresse mail. ")]),_:1},8,["href"])]),g(t("div",Y," Un nouveau lien a ete envoyer dans votre adresse mail. ",512),[[y,P.value]])])):k("",!0)]),t("div",Z,[s(d,{modelValue:o(e).phone,"onUpdate:modelValue":l[2]||(l[2]=p=>o(e).phone=p),type:"text",placeholder:"243844720350",required:"",label:"Telephone"},null,8,["modelValue"]),s(h,{message:o(e).errors.phone,class:"mt-2"},null,8,["message"])])]),actions:r(()=>[s(T,{on:o(e).recentlySuccessful,class:"mr-3"},{default:r(()=>[c(" Enregistré. ")]),_:1},8,["on"]),s(O,{class:q({"opacity-25":o(e).processing}),disabled:o(e).processing},{default:r(()=>[c(" Enregistrer ")]),_:1},8,["class","disabled"])]),_:1})}}};export{re as default};
